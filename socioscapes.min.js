!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.socioscapes=e()}}(function(){var e;return function n(e,t,r){function o(s,i){if(!t[s]){if(!e[s]){var u="function"==typeof require&&require;if(!i&&u)return u(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=t[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return o(n?n:t)},f,f.exports,n,e,t,r)}return t[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,n,r){(function(){var t,o,a,s,i,u,c,f,l,p,h,d,g,m,b,y,v,w,k,j,C,_,x,O,P,S,M,T,N,L,I,F,G,E,A,q,R,V,B,z,D,J,U,Z,H,Y,W,X,$,Q,K,ee,te,ne,re,oe,ae,se,ie,ue,ce,fe,le,pe,he,de,ge,me,be,ye,ve,we,ke,je,Ce,_e,xe,Oe,Pe,Se=[].slice;Ce=function(){var e,t,n,r,o;for(e={},o="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),r=0,t=o.length;t>r;r++)n=o[r],e["[object "+n+"]"]=n.toLowerCase();return function(t){var n;return n=Object.prototype.toString.call(t),e[n]||"object"}}(),H=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),t>e&&(e=t),e>n&&(e=n),e},_e=function(e){return e.length>=3?[].slice.call(e):e[0]},j=function(e){var t;for(t in e)3>t?(e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e},s=Math.PI,ye=Math.round,x=Math.cos,T=Math.floor,ne=Math.pow,Y=Math.log,we=Math.sin,ke=Math.sqrt,g=Math.atan2,$=Math.max,d=Math.abs,c=2*s,i=s/3,o=s/180,u=180/s,k=function(){return arguments[0]instanceof t?arguments[0]:function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,arguments,function(){})},h=[],"undefined"!=typeof n&&null!==n&&null!=n.exports&&(n.exports=k),"function"==typeof e&&e.amd?e([],function(){return k}):(be="undefined"!=typeof r&&null!==r?r:this,be.chroma=k),k.version="1.1.1",p={},f=[],l=!1,t=function(){function e(){var e,t,n,r,o,a,s,i,u;for(a=this,t=[],i=0,r=arguments.length;r>i;i++)e=arguments[i],null!=e&&t.push(e);if(s=t[t.length-1],null!=p[s])a._rgb=j(p[s](_e(t.slice(0,-1))));else{for(l||(f=f.sort(function(e,t){return t.p-e.p}),l=!0),u=0,o=f.length;o>u&&(n=f[u],!(s=n.test.apply(n,t)));u++);s&&(a._rgb=j(p[s].apply(p,t)))}null==a._rgb&&console.warn("unknown format: "+t),null==a._rgb&&(a._rgb=[0,0,0]),3===a._rgb.length&&a._rgb.push(1)}return e.prototype.alpha=function(e){return arguments.length?(this._rgb[3]=e,this):this._rgb[3]},e.prototype.toString=function(){return this.name()},e}(),k._input=p,k.brewer=v={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},xe={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6",rebeccapurple:"#663399"},k.colors=_=xe,z=function(){var e,t,n,r,o,s,i,u,c;return t=_e(arguments),o=t[0],e=t[1],n=t[2],u=(o+16)/116,i=isNaN(e)?u:u+e/500,c=isNaN(n)?u:u-n/200,u=a.Yn*D(u),i=a.Xn*D(i),c=a.Zn*D(c),s=Pe(3.2404542*i-1.5371385*u-.4985314*c),r=Pe(-.969266*i+1.8760108*u+.041556*c),n=Pe(.0556434*i-.2040259*u+1.0572252*c),s=H(s,0,255),r=H(r,0,255),n=H(n,0,255),[s,r,n,t.length>3?t[3]:1]},Pe=function(e){return ye(255*(.00304>=e?12.92*e:1.055*ne(e,1/2.4)-.055))},D=function(e){return e>a.t1?e*e*e:a.t2*(e-a.t0)},a={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ce=function(){var e,t,n,r,o,a,s,i;return r=_e(arguments),n=r[0],t=r[1],e=r[2],o=de(n,t,e),a=o[0],s=o[1],i=o[2],[116*s-16,500*(a-s),200*(s-i)]},ge=function(e){return(e/=255)<=.04045?e/12.92:ne((e+.055)/1.055,2.4)},Oe=function(e){return e>a.t3?ne(e,1/3):e/a.t2+a.t0},de=function(){var e,t,n,r,o,s,i;return r=_e(arguments),n=r[0],t=r[1],e=r[2],n=ge(n),t=ge(t),e=ge(e),o=Oe((.4124564*n+.3575761*t+.1804375*e)/a.Xn),s=Oe((.2126729*n+.7151522*t+.072175*e)/a.Yn),i=Oe((.0193339*n+.119192*t+.9503041*e)/a.Zn),[o,s,i]},k.lab=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Se.call(arguments).concat(["lab"]),function(){})},p.lab=z,t.prototype.lab=function(){return ce(this._rgb)},m=function(e){var t,n,r,o,a,s,i,u,c,f,l;return e=function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)o=e[n],r.push(k(o));return r}(),2===e.length?(c=function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)o=e[n],r.push(o.lab());return r}(),a=c[0],s=c[1],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;2>=n;t=++n)r.push(a[t]+e*(s[t]-a[t]));return r}(),k.lab.apply(k,n)}):3===e.length?(f=function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)o=e[n],r.push(o.lab());return r}(),a=f[0],s=f[1],i=f[2],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;2>=n;t=++n)r.push((1-e)*(1-e)*a[t]+2*(1-e)*e*s[t]+e*e*i[t]);return r}(),k.lab.apply(k,n)}):4===e.length?(l=function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)o=e[n],r.push(o.lab());return r}(),a=l[0],s=l[1],i=l[2],u=l[3],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;2>=n;t=++n)r.push((1-e)*(1-e)*(1-e)*a[t]+3*(1-e)*(1-e)*e*s[t]+3*(1-e)*e*e*i[t]+e*e*e*u[t]);return r}(),k.lab.apply(k,n)}):5===e.length&&(n=m(e.slice(0,3)),r=m(e.slice(2,5)),t=function(e){return.5>e?n(2*e):r(2*(e-.5))}),t},k.bezier=function(e){var t;return t=m(e),t.scale=function(){return k.scale(t)},t},k.cubehelix=function(e,t,n,r,o){var a,s,i;return null==e&&(e=300),null==t&&(t=-1.5),null==n&&(n=1),null==r&&(r=1),null==o&&(o=[0,1]),s=o[1]-o[0],a=0,i=function(i){var u,f,l,p,h,d,g,m,b;return u=c*((e+120)/360+t*i),g=ne(o[0]+s*i,r),d=0!==a?n[0]+i*a:n,f=d*g*(1-g)/2,p=x(u),b=we(u),m=g+f*(-.14861*p+1.78277*b),h=g+f*(-.29227*p-.90649*b),l=g+f*(1.97294*p),k(j([255*m,255*h,255*l]))},i.start=function(t){return null==t?e:(e=t,i)},i.rotations=function(e){return null==e?t:(t=e,i)},i.gamma=function(e){return null==e?r:(r=e,i)},i.hue=function(e){return null==e?n:(n=e,"array"===Ce(n)?(a=n[1]-n[0],0===a&&(n=n[1])):a=0,i)},i.lightness=function(e){return null==e?o:(o=e,"array"===Ce(o)?(s=o[1]-o[0],0===s&&(o=o[1])):s=0,i)},i.scale=function(){return k.scale(i)},i.hue(n),i},k.random=function(){var e,n,r,o;for(n="0123456789abcdef",e="#",r=o=0;6>o;r=++o)e+=n.charAt(T(16*Math.random()));return new t(e)},p.rgb=function(){var e,t,n,r;t=_e(arguments),n=[];for(e in t)r=t[e],n.push(r);return n},k.rgb=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Se.call(arguments).concat(["rgb"]),function(){})},t.prototype.rgb=function(){return this._rgb.slice(0,3)},t.prototype.rgba=function(){return this._rgb},f.push({p:15,test:function(e){var t;return t=_e(arguments),"array"===Ce(t)&&3===t.length?"rgb":4===t.length&&"number"===Ce(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),N=function(e){var t,n,r,o,a,s;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(4===e.length||7===e.length)&&(e=e.substr(1)),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),s=parseInt(e,16),o=s>>16,r=s>>8&255,n=255&s,[o,r,n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),s=parseInt(e,16),o=s>>24&255,r=s>>16&255,n=s>>8&255,t=ye((255&s)/255*100)/100,[o,r,n,t];if(null!=p.css&&(a=p.css(e)))return a;throw"unknown color: "+e},ae=function(e,t){var n,r,o,a,s,i,u;return null==t&&(t="rgb"),s=e[0],o=e[1],r=e[2],n=e[3],u=s<<16|o<<8|r,i="000000"+u.toString(16),i=i.substr(i.length-6),a="0"+ye(255*n).toString(16),a=a.substr(a.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return i+a;case"argb":return a+i;default:return i}}()},p.hex=function(e){return N(e)},k.hex=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Se.call(arguments).concat(["hex"]),function(){})},t.prototype.hex=function(e){return null==e&&(e="rgb"),ae(this._rgb,e)},f.push({p:10,test:function(e){return 1===arguments.length&&"string"===Ce(e)?"hex":void 0}}),F=function(){var e,t,n,r,o,a,s,i,u,c,f,l,p,h;if(e=_e(arguments),o=e[0],f=e[1],s=e[2],0===f)u=r=t=255*s;else{for(h=[0,0,0],n=[0,0,0],p=.5>s?s*(1+f):s+f-s*f,l=2*s-p,o/=360,h[0]=o+1/3,h[1]=o,h[2]=o-1/3,a=i=0;2>=i;a=++i)h[a]<0&&(h[a]+=1),h[a]>1&&(h[a]-=1),6*h[a]<1?n[a]=l+6*(p-l)*h[a]:2*h[a]<1?n[a]=p:3*h[a]<2?n[a]=l+(p-l)*(2/3-h[a])*6:n[a]=l;c=[ye(255*n[0]),ye(255*n[1]),ye(255*n[2])],u=c[0],r=c[1],t=c[2]}return e.length>3?[u,r,t,e[3]]:[u,r,t]},ie=function(e,t,n){var r,o,a,s,i;return void 0!==e&&e.length>=3&&(s=e,e=s[0],t=s[1],n=s[2]),e/=255,t/=255,n/=255,a=Math.min(e,t,n),$=Math.max(e,t,n),o=($+a)/2,$===a?(i=0,r=Number.NaN):i=.5>o?($-a)/($+a):($-a)/(2-$-a),e===$?r=(t-n)/($-a):t===$?r=2+(n-e)/($-a):n===$&&(r=4+(e-t)/($-a)),r*=60,0>r&&(r+=360),[r,i,o]},k.hsl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Se.call(arguments).concat(["hsl"]),function(){})},p.hsl=F,t.prototype.hsl=function(){return ie(this._rgb)},G=function(){var e,t,n,r,o,a,s,i,u,c,f,l,p,h,d,g,m,b;if(e=_e(arguments),o=e[0],g=e[1],b=e[2],b*=255,0===g)u=r=t=b;else switch(360===o&&(o=0),o>360&&(o-=360),0>o&&(o+=360),o/=60,a=T(o),n=o-a,s=b*(1-g),i=b*(1-g*n),m=b*(1-g*(1-n)),a){case 0:c=[b,m,s],u=c[0],r=c[1],t=c[2];break;case 1:f=[i,b,s],u=f[0],r=f[1],t=f[2];break;case 2:l=[s,b,m],u=l[0],r=l[1],t=l[2];break;case 3:p=[s,i,b],u=p[0],r=p[1],t=p[2];break;case 4:h=[m,s,b],u=h[0],r=h[1],t=h[2];break;case 5:d=[b,s,i],u=d[0],r=d[1],t=d[2]}return u=ye(u),r=ye(r),t=ye(t),[u,r,t,e.length>3?e[3]:1]},ue=function(){var e,t,n,r,o,a,s,i,u;return s=_e(arguments),a=s[0],n=s[1],e=s[2],o=Math.min(a,n,e),$=Math.max(a,n,e),t=$-o,u=$/255,0===$?(r=Number.NaN,i=0):(i=t/$,a===$&&(r=(n-e)/t),n===$&&(r=2+(e-a)/t),e===$&&(r=4+(a-n)/t),r*=60,0>r&&(r+=360)),[r,i,u]},k.hsv=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Se.call(arguments).concat(["hsv"]),function(){})},p.hsv=G,t.prototype.hsv=function(){return ue(this._rgb)},ee=function(e){var t,n,r;return"number"===Ce(e)&&e>=0&&16777215>=e?(r=e>>16,n=e>>8&255,t=255&e,[r,n,t,1]):(console.warn("unknown num color: "+e),[0,0,0,1])},pe=function(){var e,t,n,r;return r=_e(arguments),n=r[0],t=r[1],e=r[2],(n<<16)+(t<<8)+e},k.num=function(e){return new t(e,"num")},t.prototype.num=function(e){return null==e&&(e="rgb"),pe(this._rgb,e)},p.num=ee,f.push({p:10,test:function(e){return 1===arguments.length&&"number"===Ce(e)&&e>=0&&16777215>=e?"num":void 0}}),O=function(e){var t,n,r,o,a,s,i,u;if(e=e.toLowerCase(),null!=k.colors&&k.colors[e])return N(k.colors[e]);if(a=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(i=a.slice(1,4),o=s=0;2>=s;o=++s)i[o]=+i[o];i[3]=1}else if(a=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(i=a.slice(1,5),o=u=0;3>=u;o=++u)i[o]=+i[o];else if(a=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(i=a.slice(1,4),o=t=0;2>=t;o=++t)i[o]=ye(2.55*i[o]);i[3]=1}else if(a=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(i=a.slice(1,5),o=n=0;2>=n;o=++n)i[o]=ye(2.55*i[o]);i[3]=+i[3]}else(a=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(r=a.slice(1,4),r[1]*=.01,r[2]*=.01,i=F(r),i[3]=1):(a=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(r=a.slice(1,4),r[1]*=.01,r[2]*=.01,i=F(r),i[3]=+a[4]);return i},oe=function(e){var t;return t=e[3]<1?"rgba":"rgb","rgb"===t?t+"("+e.slice(0,3).map(ye).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(ye).join(",")+","+e[3]+")":void 0},me=function(e){return ye(100*e)/100},I=function(e,t){var n;return n=1>t?"hsla":"hsl",e[0]=me(e[0]||0),e[1]=me(100*e[1])+"%",e[2]=me(100*e[2])+"%","hsla"===n&&(e[3]=t),n+"("+e.join(",")+")"},p.css=function(e){return O(e)},k.css=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Se.call(arguments).concat(["css"]),function(){})},t.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?oe(this._rgb):"hsl"===e.slice(0,3)?I(this.hsl(),this.alpha()):void 0},p.named=function(e){return N(xe[e])},f.push({p:20,test:function(e){return 1===arguments.length&&null!=xe[e]?"named":void 0}}),t.prototype.name=function(e){var t,n;arguments.length&&(xe[e]&&(this._rgb=N(xe[e])),this._rgb[3]=1),t=this.hex();for(n in xe)if(t===xe[n])return n;return t},J=function(){var e,t,n,r;return r=_e(arguments),n=r[0],e=r[1],t=r[2],t*=o,[n,x(t)*e,we(t)*e]},U=function(){var e,t,n,r,o,a,s,i,u,c,f;return n=_e(arguments),i=n[0],o=n[1],s=n[2],c=J(i,o,s),e=c[0],t=c[1],r=c[2],f=z(e,t,r),u=f[0],a=f[1],r=f[2],[H(u,0,255),H(a,0,255),H(r,0,255),n.length>3?n[3]:1]},B=function(){var e,t,n,r,o,a;return a=_e(arguments),o=a[0],e=a[1],t=a[2],n=ke(e*e+t*t),r=(g(t,e)*u+360)%360,0===ye(1e4*n)&&(r=Number.NaN),[o,n,r]},fe=function(){var e,t,n,r,o,a,s;return a=_e(arguments),o=a[0],n=a[1],t=a[2],s=ce(o,n,t),r=s[0],e=s[1],t=s[2],B(r,e,t)},k.lch=function(){var e;return e=_e(arguments),new t(e,"lch")},k.hcl=function(){var e;return e=_e(arguments),new t(e,"hcl")},p.lch=U,p.hcl=function(){var e,t,n,r;return r=_e(arguments),t=r[0],e=r[1],n=r[2],U([n,e,t])},t.prototype.lch=function(){return fe(this._rgb)},t.prototype.hcl=function(){return fe(this._rgb).reverse()},re=function(e){var t,n,r,o,a,s,i,u,c;return null==e&&(e="rgb"),u=_e(arguments),i=u[0],o=u[1],t=u[2],i/=255,o/=255,t/=255,a=1-Math.max(i,Math.max(o,t)),r=1>a?1/(1-a):0,n=(1-i-a)*r,s=(1-o-a)*r,c=(1-t-a)*r,[n,s,c,a]},C=function(){var e,t,n,r,o,a,s,i,u;return t=_e(arguments),r=t[0],s=t[1],u=t[2],a=t[3],e=t.length>4?t[4]:1,1===a?[0,0,0,e]:(i=r>=1?0:ye(255*(1-r)*(1-a)),o=s>=1?0:ye(255*(1-s)*(1-a)),n=u>=1?0:ye(255*(1-u)*(1-a)),[i,o,n,e])},p.cmyk=function(){return C(_e(arguments))},k.cmyk=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Se.call(arguments).concat(["cmyk"]),function(){})},t.prototype.cmyk=function(){return re(this._rgb)},p.gl=function(){var e,t,n,r,o;for(r=function(){var e,n;e=_e(arguments),n=[];for(t in e)o=e[t],n.push(o);return n}.apply(this,arguments),e=n=0;2>=n;e=++n)r[e]*=255;return r},k.gl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Se.call(arguments).concat(["gl"]),function(){})},t.prototype.gl=function(){var e;return e=this._rgb,[e[0]/255,e[1]/255,e[2]/255,e[3]]},le=function(e,t,n){var r;return r=_e(arguments),e=r[0],t=r[1],n=r[2],e=W(e),t=W(t),n=W(n),.2126*e+.7152*t+.0722*n},W=function(e){return e/=255,.03928>=e?e/12.92:ne((e+.055)/1.055,2.4)},h=[],E=function(e,t,n,r){var o,a,s,i;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==Ce(e)&&(e=k(e)),"object"!==Ce(t)&&(t=k(t)),s=0,a=h.length;a>s;s++)if(o=h[s],r===o[0]){i=o[1](e,t,n,r);break}if(null==i)throw"color mode "+r+" is not supported";return i.alpha(e.alpha()+n*(t.alpha()-e.alpha())),i},k.interpolate=E,t.prototype.interpolate=function(e,t,n){return E(this,e,t,n)},k.mix=E,t.prototype.mix=t.prototype.interpolate,V=function(e,n,r,o){var a,s;return a=e._rgb,s=n._rgb,new t(a[0]+r*(s[0]-a[0]),a[1]+r*(s[1]-a[1]),a[2]+r*(s[2]-a[2]),o)},h.push(["rgb",V]),t.prototype.luminance=function(e,t){var n,r,o,a;return null==t&&(t="rgb"),arguments.length?(0===e?this._rgb=[0,0,0,this._rgb[3]]:1===e?this._rgb=[255,255,255,this._rgb[3]]:(r=1e-7,o=20,a=function(n,s){var i,u;return u=n.interpolate(s,.5,t),i=u.luminance(),Math.abs(e-i)<r||!o--?u:i>e?a(n,u):a(u,s)},n=le(this._rgb),this._rgb=(n>e?a(k("black"),this):a(this,k("white"))).rgba()),this):le(this._rgb)},je=function(e){var t,n,r,o;return o=e/100,66>o?(r=255,n=-155.25485562709179-.44596950469579133*(n=o-2)+104.49216199393888*Y(n),t=20>o?0:-254.76935184120902+.8274096064007395*(t=o-10)+115.67994401066147*Y(t)):(r=351.97690566805693+.114206453784165*(r=o-55)-40.25366309332127*Y(r),n=325.4494125711974+.07943456536662342*(n=o-50)-28.0852963507957*Y(n),t=255),j([r,n,t])},he=function(){var e,t,n,r,o,a,s,i,u;for(s=_e(arguments),a=s[0],n=s[1],e=s[2],o=1e3,r=4e4,t=.4;r-o>t;)u=.5*(r+o),i=je(u),i[2]/i[0]>=e/a?r=u:o=u;return ye(u)},k.temperature=k.kelvin=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Se.call(arguments).concat(["temperature"]),function(){})},p.temperature=p.kelvin=p.K=je,t.prototype.temperature=function(){return he(this._rgb)},t.prototype.kelvin=t.prototype.temperature,k.contrast=function(e,n){var r,o,a,s;return("string"===(a=Ce(e))||"number"===a)&&(e=new t(e)),("string"===(s=Ce(n))||"number"===s)&&(n=new t(n)),r=e.luminance(),o=n.luminance(),r>o?(r+.05)/(o+.05):(o+.05)/(r+.05)},t.prototype.get=function(e){var t,n,r,o,a,s;return r=this,a=e.split("."),o=a[0],t=a[1],s=r[o](),t?(n=o.indexOf(t),n>-1?s[n]:console.warn("unknown channel "+t+" in mode "+o)):s},t.prototype.set=function(e,t){var n,r,o,a,s,i;if(o=this,s=e.split("."),a=s[0],n=s[1],n)if(i=o[a](),r=a.indexOf(n),r>-1)if("string"===Ce(t))switch(t.charAt(0)){case"+":i[r]+=+t;break;case"-":i[r]+=+t;break;case"*":i[r]*=+t.substr(1);break;case"/":i[r]/=+t.substr(1);break;default:i[r]=+t}else i[r]=t;else console.warn("unknown channel "+n+" in mode "+a);else i=t;return o._rgb=k(i,a).alpha(o.alpha())._rgb,o},t.prototype.darken=function(e){var t,n;return null==e&&(e=1),n=this,t=n.lab(),t[0]-=a.Kn*e,k.lab(t).alpha(n.alpha())},t.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},t.prototype.darker=t.prototype.darken,t.prototype.brighter=t.prototype.brighten,t.prototype.saturate=function(e){var t,n;return null==e&&(e=1),n=this,t=n.lch(),t[1]+=e*a.Kn,t[1]<0&&(t[1]=0),k.lch(t).alpha(n.alpha())},t.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},t.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),k(t[0]*e,t[1]*e,t[2]*e,e)},b=function(e,t,n){if(!b[n])throw"unknown blend mode "+n;return b[n](e,t)},y=function(e){return function(t,n){var r,o;return r=k(n).rgb(),o=k(t).rgb(),k(e(r,o),"rgb")}},M=function(e){return function(t,n){var r,o,a;for(a=[],r=o=0;3>=o;r=++o)a[r]=e(t[r],n[r]);return a}},K=function(e,t){return e},Q=function(e,t){return e*t/255},P=function(e,t){return e>t?t:e},Z=function(e,t){return e>t?e:t},ve=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},te=function(e,t){return 128>t?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},w=function(e,t){return 255*(1-(1-t/255)/(e/255))},S=function(e,t){return 255===e?255:(e=255*(t/255)/(1-e/255),e>255?255:e)},b.normal=y(M(K)),b.multiply=y(M(Q)),b.screen=y(M(ve)),b.overlay=y(M(te)),b.darken=y(M(P)),b.lighten=y(M(Z)),b.dodge=y(M(S)),b.burn=y(M(w)),k.blend=b,k.analyze=function(e){var t,n,r,o;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,t=e.length;t>n;n++)o=e[n],null==o||isNaN(o)||(r.values.push(o),r.sum+=o,o<r.min&&(r.min=o),o>r.max&&(r.max=o),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,t){return k.limits(r,e,t)},r},k.scale=function(e,t){var n,r,o,a,s,i,u,c,f,l,p,h,d,g,m,b,y,v,w,j,C;return f="rgb",l=k("#ccc"),g=0,i=!1,s=[0,1],d=[],h=[0,0],n=!1,o=[],p=!1,c=0,u=1,a=!1,r={},j=function(e){var t,n,r,a,s,i,u;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===Ce(e)&&null!=(null!=(a=k.brewer)?a[e]:void 0)&&(e=k.brewer[e]),"array"===Ce(e)){for(e=e.slice(0),t=r=0,s=e.length-1;s>=0?s>=r:r>=s;t=s>=0?++r:--r)n=e[t],"string"===Ce(n)&&(e[t]=k(n));for(d.length=0,t=u=0,i=e.length-1;i>=0?i>=u:u>=i;t=i>=0?++u:--u)d.push(t/(e.length-1))}return w(),o=e},y=function(e){var t,r;if(null!=n){for(r=n.length-1,t=0;r>t&&e>=n[t];)t++;return t-1}return 0},C=function(e){return e},m=function(e){var t,r,o,a,s;return s=e,n.length>2&&(a=n.length-1,t=y(e),o=n[0]+(n[1]-n[0])*(0+.5*g),r=n[a-1]+(n[a]-n[a-1])*(1-.5*g),s=c+(n[t]+.5*(n[t+1]-n[t])-o)/(r-o)*(u-c)),s},v=function(e,t){var a,s,i,p,g,m,b,v;if(null==t&&(t=!1),isNaN(e))return l;if(t?v=e:n&&n.length>2?(a=y(e),v=a/(n.length-2),v=h[0]+v*(1-h[0]-h[1])):u!==c?(v=(e-c)/(u-c),v=h[0]+v*(1-h[0]-h[1]),v=Math.min(1,Math.max(0,v))):v=1,t||(v=C(v)),p=Math.floor(1e4*v),r[p])s=r[p];else{if("array"===Ce(o))for(i=g=0,b=d.length-1;b>=0?b>=g:g>=b;i=b>=0?++g:--g){if(m=d[i],m>=v){s=o[i];break}if(v>=m&&i===d.length-1){s=o[i];break}if(v>m&&v<d[i+1]){v=(v-m)/(d[i+1]-m),s=k.interpolate(o[i],o[i+1],v,f);break}}else"function"===Ce(o)&&(s=o(v));r[p]=s}return s},w=function(){return r={}},j(e),b=function(e){var t;return t=k(v(e)),p&&t[p]?t[p]():t},b.classes=function(e){var t;return null!=e?("array"===Ce(e)?(n=e,s=[e[0],e[e.length-1]]):(t=k.analyze(s),n=0===e?[t.min,t.max]:k.limits(t,"e",e)),b):n},b.domain=function(e){var t,n,r,a,i,f,l;if(!arguments.length)return s;if(c=e[0],u=e[e.length-1],d=[],r=o.length,e.length===r&&c!==u)for(i=0,a=e.length;a>i;i++)n=e[i],d.push((n-c)/(u-c));else for(t=l=0,f=r-1;f>=0?f>=l:l>=f;t=f>=0?++l:--l)d.push(t/(r-1));return s=[c,u],b},b.mode=function(e){return arguments.length?(f=e,w(),b):f},b.range=function(e,t){return j(e,t),b},b.out=function(e){return p=e,b},b.spread=function(e){return arguments.length?(g=e,b):g},b.correctLightness=function(e){return null==e&&(e=!0),a=e,w(),C=a?function(e){var t,n,r,o,a,s,i,u,c;for(t=v(0,!0).lab()[0],n=v(1,!0).lab()[0],i=t>n,r=v(e,!0).lab()[0],a=t+(n-t)*e,o=r-a,u=0,c=1,s=20;Math.abs(o)>.01&&s-->0;)!function(){return i&&(o*=-1),0>o?(u=e,e+=.5*(c-e)):(c=e,e+=.5*(u-e)),r=v(e,!0).lab()[0],o=r-a}();return e}:function(e){return e},b},b.padding=function(e){return null!=e?("number"===Ce(e)&&(e=[e,e]),h=e,b):h},b.colors=function(){var t,r,o,a,i,u,c,f,l;if(a=0,i="hex",1===arguments.length&&("string"===Ce(arguments[0])?i=arguments[0]:a=arguments[0]),2===arguments.length&&(a=arguments[0],i=arguments[1]),a)return r=s[0],t=s[1]-r,function(){c=[];for(var e=0;a>=0?a>e:e>a;a>=0?e++:e--)c.push(e);return c}.apply(this).map(function(e){return b(r+e/(a-1)*t)[i]()});if(e=[],f=[],n&&n.length>2)for(o=l=1,u=n.length;u>=1?u>l:l>u;o=u>=1?++l:--l)f.push(.5*(n[o-1]+n[o]));else f=s;return f.map(function(e){return b(e)[i]()})},b},null==k.scales&&(k.scales={}),k.scales.cool=function(){return k.scale([k.hsl(180,1,.9),k.hsl(250,.7,.4)])},k.scales.hot=function(){return k.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},k.analyze=function(e,t,n){var r,o,a,s,i,u,c;if(i={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(e){null==e||isNaN(e)||(i.values.push(e),i.sum+=e,e<i.min&&(i.min=e),e>i.max&&(i.max=e),i.count+=1)},c=function(e,o){return n(e,o)?r(null!=t&&"function"===Ce(t)?t(e):null!=t&&"string"===Ce(t)||"number"===Ce(t)?e[t]:e):void 0},"array"===Ce(e))for(s=0,a=e.length;a>s;s++)u=e[s],c(u);else for(o in e)u=e[o],c(u,o);return i.domain=[i.min,i.max],i.limits=function(e,t){return k.limits(i,e,t)},i},k.limits=function(e,t,n){var r,o,a,s,i,u,c,f,l,p,h,g,m,b,y,v,w,j,C,_,x,O,P,S,M,N,L,I,F,G,E,A,q,R,V,B,z,D,J,U,Z,H,W,X,Q,K,ee,te,re,oe,ae,se,ie,ue,ce;if(null==t&&(t="equal"),null==n&&(n=7),"array"===Ce(e)&&(e=k.analyze(e)),M=e.min,$=e.max,ae=e.sum,ue=e.values.sort(function(e,t){return e-t}),P=[],"c"===t.substr(0,1)&&(P.push(M),P.push($)),"e"===t.substr(0,1)){for(P.push(M),_=E=1,V=n-1;V>=1?V>=E:E>=V;_=V>=1?++E:--E)P.push(M+_/n*($-M));P.push($)}else if("l"===t.substr(0,1)){if(0>=M)throw"Logarithmic scales are only possible for values > 0";for(N=Math.LOG10E*Y(M),S=Math.LOG10E*Y($),P.push(M),_=ce=1,B=n-1;B>=1?B>=ce:ce>=B;_=B>=1?++ce:--ce)P.push(ne(10,N+_/n*(S-N)));P.push($)}else if("q"===t.substr(0,1)){for(P.push(M),_=r=1,H=n-1;H>=1?H>=r:r>=H;_=H>=1?++r:--r)A=ue.length*_/n,q=T(A),q===A?P.push(ue[q]):(R=A-q,P.push(ue[q]*R+ue[q+1]*(1-R)));P.push($)}else if("k"===t.substr(0,1)){for(I=ue.length,b=new Array(I),j=new Array(n),oe=!0,F=0,v=null,v=[],v.push(M),_=o=1,W=n-1;W>=1?W>=o:o>=W;_=W>=1?++o:--o)v.push(M+_/n*($-M));for(v.push($);oe;){for(x=a=0,X=n-1;X>=0?X>=a:a>=X;x=X>=0?++a:--a)j[x]=0;for(_=s=0,Q=I-1;Q>=0?Q>=s:s>=Q;_=Q>=0?++s:--s){for(ie=ue[_],L=Number.MAX_VALUE,x=i=0,K=n-1;K>=0?K>=i:i>=K;x=K>=0?++i:--i)C=d(v[x]-ie),L>C&&(L=C,y=x);j[y]++,b[_]=y}for(G=new Array(n),x=u=0,ee=n-1;ee>=0?ee>=u:u>=ee;x=ee>=0?++u:--u)G[x]=null;for(_=c=0,te=I-1;te>=0?te>=c:c>=te;_=te>=0?++c:--c)w=b[_],null===G[w]?G[w]=ue[_]:G[w]+=ue[_];for(x=f=0,re=n-1;re>=0?re>=f:f>=re;x=re>=0?++f:--f)G[x]*=1/j[x];for(oe=!1,x=l=0,z=n-1;z>=0?z>=l:l>=z;x=z>=0?++l:--l)if(G[x]!==v[_]){oe=!0;break}v=G,F++,F>200&&(oe=!1)}for(O={},x=p=0,D=n-1;D>=0?D>=p:p>=D;x=D>=0?++p:--p)O[x]=[];for(_=h=0,J=I-1;J>=0?J>=h:h>=J;_=J>=0?++h:--h)w=b[_],O[w].push(ue[_]);for(se=[],x=g=0,U=n-1;U>=0?U>=g:g>=U;x=U>=0?++g:--g)se.push(O[x][0]),se.push(O[x][O[x].length-1]);for(se=se.sort(function(e,t){return e-t}),P.push(se[0]),_=m=1,Z=se.length-1;Z>=m;_=m+=2)isNaN(se[_])||P.push(se[_])}return P},L=function(e,t,n){var r,o,a,s;return r=_e(arguments),e=r[0],t=r[1],n=r[2],e/=360,1/3>e?(o=(1-t)/3,s=(1+t*x(c*e)/x(i-c*e))/3,a=1-(o+s)):2/3>e?(e-=1/3,s=(1-t)/3,a=(1+t*x(c*e)/x(i-c*e))/3,o=1-(s+a)):(e-=2/3,a=(1-t)/3,o=(1+t*x(c*e)/x(i-c*e))/3,s=1-(a+o)),s=H(n*s*3),a=H(n*a*3),o=H(n*o*3),[255*s,255*a,255*o,r.length>3?r[3]:1]},se=function(){var e,t,n,r,o,a,s,i;return s=_e(arguments),a=s[0],t=s[1],e=s[2],c=2*Math.PI,a/=255,t/=255,e/=255,o=Math.min(a,t,e),r=(a+t+e)/3,i=1-o/r,0===i?n=0:(n=(a-t+(a-e))/2,n/=Math.sqrt((a-t)*(a-t)+(a-e)*(t-e)),n=Math.acos(n),e>t&&(n=c-n),n/=c),[360*n,i,r]},k.hsi=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Se.call(arguments).concat(["hsi"]),function(){})},p.hsi=L,t.prototype.hsi=function(){return se(this._rgb)},A=function(e,t,n,r){var o,a,s,i,u,c,f,l,p,h,d,g,m;return"hsl"===r?(g=e.hsl(),m=t.hsl()):"hsv"===r?(g=e.hsv(),m=t.hsv()):"hsi"===r?(g=e.hsi(),
m=t.hsi()):("lch"===r||"hcl"===r)&&(r="hcl",g=e.hcl(),m=t.hcl()),"h"===r.substr(0,1)&&(s=g[0],h=g[1],c=g[2],i=m[0],d=m[1],f=m[2]),isNaN(s)||isNaN(i)?isNaN(s)?isNaN(i)?a=Number.NaN:(a=i,1!==c&&0!==c||"hsv"===r||(p=d)):(a=s,1!==f&&0!==f||"hsv"===r||(p=h)):(o=i>s&&i-s>180?i-(s+360):s>i&&s-i>180?i+360-s:i-s,a=s+n*o),null==p&&(p=h+n*(d-h)),u=c+n*(f-c),l=k[r](a,p,u)},h=h.concat(function(){var e,t,n,r;for(n=["hsv","hsl","hsi","hcl","lch"],r=[],t=0,e=n.length;e>t;t++)X=n[t],r.push([X,A]);return r}()),R=function(e,t,n,r){var o,a;return o=e.num(),a=t.num(),k.num(o+(a-o)*n,"num")},h.push(["num",R]),q=function(e,n,r,o){var a,s,i;return s=e.lab(),i=n.lab(),a=new t(s[0]+r*(i[0]-s[0]),s[1]+r*(i[1]-s[1]),s[2]+r*(i[2]-s[2]),o)},h.push(["lab",q])}).call(this)},{}],2:[function(e,t,n){"use strict";function r(e){var t=r.prototype.newCallback,n=t(arguments),o=!1,a=["help","abstract","arguments","Array","boolean","break","byte","case","catch","char","class","const","continue","debugger","Date","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","hasOwnProperty","if","implements","import","in","instanceof","int","interface","isFinite","isNaN","isPrototypeOf","Infinity","length","let","long","native","Math","name","new","NaN","Number","null","Object","package","private","protected","prototype","public","return","short","static","super","switch","synchronized","String","this","throw","throws","toString","transient","true","try","typeof","undefined","valueOf","var","void","volatile","while","with","yield"];return e&&"string"==typeof e&&(/^[-A-Z0-9]+$/i.test(e)?-1===a.indexOf(e)?o=!0:console.log('Sorry, "'+e+'" is not a valid name because it is a reserved word. The full list of reserved words is: '+a):console.log("Sorry, that is not a valid name. Valid names can only contain letters (a to Z), numbers (0-9), or dashes (-).")),n(o),o}t.exports=r},{}],3:[function(e,t,n){"use strict";function r(e){var t=r.prototype.newCallback,n=t(arguments),o=!1;return e&&e.meta&&e.meta.type&&e.meta.type.indexOf("scape.sociJson")>-1&&(o=!0),n(o),o}t.exports=r},{}],4:[function(e,t,n){"use strict";function r(e){o=r.prototype.newCallback;var t=o(arguments),n=!1;return e&&"string"==typeof e&&/^(http|HTTP|https|HTTPS|ftp|FTP|ftps|FTPS):\/\/(([a-zA-Z0-9$\-_.+!*'(),;:&=]|%[0-9a-fA-F]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])){3})|localhost|([a-zA-Z0-9\-\u00C0-\u017F]+\.)+([a-zA-Z]{2,}))(:[0-9]+)?(\/(([a-zA-Z0-9$\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*(\/([a-zA-Z0-9$\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*)*)?(\?([a-zA-Z0-9$\-_.+!*'(),;:@&=\/?]|%[0-9a-fA-F]{2})*)?(#([a-zA-Z0-9$\-_.+!*'(),;:@&=\/?]|%[0-9a-fA-F]{2})*)?)?$/.test(e)&&(n=!0),t(n),n}var o=e("./../construct/newCallback.js");t.exports=r},{"./../construct/newCallback.js":5}],5:[function(e,t,n){"use strict";function r(e){var t;return t="function"==typeof e[e.length-1]?e[e.length-1]:function(e){return e}}t.exports=r},{}],6:[function(e,t,n){"use strict";function r(){var e=r.prototype.newCallback,t=r.prototype.newEvent,n=function(){var n,r,o,a,s=[],i=!0,u=this,c=function(e){for(var t=[],n=0;n<e.myArguments.length;n++)t.push(e.myArguments[n]);return e.myArguments=t,e},f=function(e){for(;e.myFunction.length>e.myArguments.length;)e.myArguments.push(null);return e},l=function(e){e.myArguments.push(function(e){a.myCallback(e),n=a.myReturn?a.myReturn:e,o={},o.item=a,o.result=e,r=t("socioscapes.dispatcher",o),document.dispatchEvent(r),i=!0,u.dispatch()}),e.myFunction.apply(e.myThis,e.myArguments)},p=function(e){return e.myThis=a.myThis?a.myThis:n,e};return Object.defineProperty(this,"dispatch",{value:function(t,n){if(t&&t.myFunction&&"function"==typeof t.myFunction&&(n=e(arguments),s.push({myFunction:t.myFunction,myArguments:t.myArguments,myThis:t.myThis,myReturn:t.myReturn,myCallback:n}),u.dispatch()),!t&&i)for(;s.length>0;)i===!0&&(i=!1,a=s.shift(),a=p(a),a=c(a),a=f(a),l(a))}}),Object.defineProperty(this.dispatch,"result",{value:function(){return n}}),Object.defineProperty(this.dispatch,"status",{value:function(){return i}}),Object.defineProperty(this.dispatch,"queue",{value:function(){return s}}),Object.defineProperty(this.dispatch,"nowServing",{value:function(){return a}}),this};return new n}t.exports=r},{}],7:[function(e,t,n){"use strict";function r(e,t){var n;return n=new CustomEvent(e,{detail:t})}!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),t.exports=r},{}],8:[function(e,t,n){(function(e){"use strict";function n(t,r,o){var a,s=n.prototype.fetchGlobal,i=n.prototype.newCallback,u=i(arguments);return s(t)?o&&(window?(window[t]=r,a=window[t]):e&&(e[t]=r,a=e[t])):window?(window[t]=r,a=window[t]):e&&(window[t]=r,a=window[t]),u(a),a}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,n){"use strict";var r=function o(e){var t=o.prototype.isValidObject,n=o.prototype.newScapeObject,r=o.prototype.newEvent,a=function(e,t,n,r){var a,s,i,u=e["class"];u.match(/\[(.*?)]/g)&&(u=/\[(.*?)]/g.exec(u)[1],a=!0),s=a?t[u][0]:t[u],i={object:n[u],schema:s,that:n},s.menu&&Object.defineProperty(r,u,{value:function(){var e,t,a=[];a.push(i);for(var u=0;u<arguments.length;u++)a.push(arguments[u]);return"menuClass"===s.menu.name?(e=s.menu.apply(n,a),t=o(e)):(n.dispatcher.dispatch({myFunction:s.menu,myArguments:a,myThis:n},function(e){e&&(t=e)}),t=r),t}})},s=function(e){var t,o=this,i=e.schema,u=i["class"],c=i.parent,f=i.type;Object.defineProperty(this,"schema",{value:e.schema}),Object.defineProperty(this,"this",{value:e}),Object.defineProperty(this,"meta",{value:e.meta}),Object.defineProperty(this,"new",{value:function(e){var t,r=this;return e=e||i.name+u.length,t=n(e,c,f),r=t?new s(t):r}}),Object.defineProperty(this,"ping",{value:function(e,t){var n;return n=r(e,"pong!"),document.dispatchEvent(n),"function"==typeof t&&t(),o}});for(var l=0;l<i.children.length;l++)a(i.children[l],i,e,this);return t=r("socioscapes.active",e.meta),document.dispatchEvent(t),this};return t(e)?new s(e):void 0};t.exports=r},{}],10:[function(e,t,n){"use strict";var r=function o(e,t,n){var r,a=o.prototype.fetchFromScape,s=o.prototype.fetchGlobal,i=o.prototype.fetchScape,u=o.prototype.newCallback,c=o.prototype.newDispatcher,f=o.prototype.newEvent,l=o.prototype.newGlobal,p=o.prototype.fetchScapeSchema,h=u(arguments),d=p(n),g=!1,m=function(e,t,n){var o=t?t.dispatcher:c();Object.defineProperty(this,"dispatcher",{value:o}),Object.defineProperty(this,"schema",{value:n}),Object.defineProperty(this.schema,"parent",{value:t||!1}),this.schema.container||Object.defineProperty(this.schema,"container",{value:t?t[n["class"]]:!1}),Object.defineProperty(this,"meta",{value:{},writeable:!0,enumerable:!0}),Object.defineProperty(this.meta,"author",{value:"",writeable:!0,enumerable:!0}),Object.defineProperty(this.meta,"name",{value:e,writeable:!0,enumerable:!0}),Object.defineProperty(this.meta,"summary",{value:"",writeable:!0,enumerable:!0}),Object.defineProperty(this.meta,"type",{value:n.type,enumerable:!0});for(var a=0;a<n.children.length;a++){var s,i,u,l,p=n.children[a]["class"];p.match(/\[(.*?)]/g)&&(p=/\[(.*?)]/g.exec(p)[1],s=!0),u=s?n[p][0]:n[p],i=u.name||u["class"],l=u.value||[],this[p]||Object.defineProperty(this,p,{value:l,enumerable:!0,writable:!0}),s&&this[p].push(new m(i,this,u))}return r=f("socioscapes.new",this.meta),document.dispatchEvent(r),this};return t=i(t),e&&(t?d&&(a(e,"name",t[d["class"]])?g=a(e,"name",t[d["class"]]):(g=new m(e,t,d),t[d["class"]].push(g))):i(e)?g=i(e):s(e)||(g=new m(e,null,d),l(e,g))),h(g),g};t.exports=r},{}],11:[function(e,t,n){"use strict";var r,o="0.6",a=e("chroma-js"),s=e("./../core/extend"),i=e("./../construct/newCallback.js"),u=e("./../construct/newDispatcher.js"),c=e("./../construct/newEvent.js"),f=e("./../fetch/fetchFromScape.js"),l=e("./../fetch/fetchGlobal.js"),p=e("./../fetch/fetchGoogleAuth.js"),h=e("./../fetch/fetchGoogleBq.js"),d=e("./../fetch/fetchGoogleGeocode.js"),g=e("./../fetch/fetchScape.js"),m=e("./../fetch/fetchWfs.js"),b=e("./../lib/geostats.min.js"),y=e("./../bool/isValidObject.js"),v=e("./../bool/isValidName.js"),w=e("./../bool/isValidUrl.js"),k=e("./../menu/menuClass.js"),j=e("./../menu/menuConfig.js"),C=e("./../menu/menuStore.js"),_=e("./../menu/menuRequire.js"),x=e("./../construct/newGlobal.js");r=function(e){return r.fn.init(e)},r.fn=r.prototype={constructor:r,chroma:a,extend:s,version:o,geostats:b},r.fn.extend.prototype=r.fn,r.fn.newCallback=i,r.fn.newCallback.prototype=r.fn,r.fn.newEvent=c,r.fn.newEvent.prototype=r.fn,r.fn.newDispatcher=u,r.fn.newDispatcher.prototype=r.fn,r.fn.menuStore=C,r.fn.menuStore.prototype=r.fn,r.fn.newGlobal=x,r.fn.newGlobal.prototype=r.fn,r.fn.menuRequire=_,r.fn.menuRequire.prototype=r.fn,r.fn.menuStore=C,r.fn.menuStore.prototype=r.fn,r.fn.menuConfig=j,r.fn.menuConfig.prototype=r.fn,r.fn.menuClass=k,r.fn.menuClass.prototype=r.fn,r.fn.isValidUrl=w,r.fn.isValidUrl=r.fn,r.fn.isValidName=v,r.fn.isValidName.prototype=r.fn,r.fn.isValidObject=y,r.fn.isValidObject.prototype=r.fn,r.fn.fetchWfs=m,r.fn.fetchWfs.prototype=r.fn,r.fn.fetchScape=g,r.fn.fetchScape.prototype=r.fn,r.fn.fetchGoogleGeocode=d,r.fn.fetchGoogleGeocode.prototype=r.fn,r.fn.fetchGoogleBq=h,r.fn.fetchGoogleBq.prototype=r.fn,r.fn.fetchGoogleAuth=p,r.fn.fetchGoogleAuth.prototype=r.fn,r.fn.fetchGlobal=l,r.fn.fetchGlobal.prototype=r.fn,r.fn.fetchFromScape=f,r.fn.fetchFromScape.prototype=r.fn,r.fn.schema={structure:{scape:{children:[{"class":"[state]"}],"class":"scape",menu:k,name:"scape0",state:[{"class":"state",children:[{"class":"[layer]"},{"class":"[view]"}],layer:[{children:[{"class":"data"},{"class":"geom"}],"class":"layer",data:{menu:C,value:{}},geom:{menu:C,value:{}},menu:k,name:"layer0",parent:"state",type:"layer.state.scape.sociJson"}],menu:k,name:"state0",parent:"scape",type:"state.scape.sociJson",view:[{config:{menu:j,value:{breaks:5,classification:"jenks",classes:[],colourScale:"YlOrRd",featureIdProperty:"dauid",layer:0,type:"",valueIdProperty:"total",version:r.fn.version}},children:[{"class":"config"},{"class":"require"}],"class":"view",menu:k,name:"view0",parent:"state",require:{menu:_,value:{layers:{},modules:{}}},type:"view.state.scape.sociJson"}]}],type:"scape.sociJson"}}},r.fn.schema.alias={bq:r.fn.fetchGoogleBq,wfs:r.fn.fetchWfs},r.fn.schema.index={scape:{"class":"scape",type:"scape.sociJson",schema:r.fn.schema.structure.scape},state:{"class":"state",type:"state.scape.sociJson",schema:r.fn.schema.structure.scape.state[0]},layer:{"class":"layer",type:"layer.state.scape.sociJson",schema:r.fn.schema.structure.scape.state[0].layer[0]},view:{"class":"view",type:"view.state.scape.sociJson",schema:r.fn.schema.structure.scape.state[0].view[0]}},r.fn.fetchScapeSchema=e("./../fetch/fetchScapeSchema.js"),r.fn.fetchScapeSchema.prototype=r.fn,r.fn.newScapeObject=e("./../construct/newScapeObject.js"),r.fn.newScapeObject.prototype=r.fn,r.fn.newScapeMenu=e("./../construct/newScapeMenu.js"),r.fn.newScapeMenu.prototype=r.fn,r.fn.init=e("./../core/init.js"),r.fn.init.prototype=r.fn,t.exports=r},{"./../bool/isValidName.js":2,"./../bool/isValidObject.js":3,"./../bool/isValidUrl.js":4,"./../construct/newCallback.js":5,"./../construct/newDispatcher.js":6,"./../construct/newEvent.js":7,"./../construct/newGlobal.js":8,"./../construct/newScapeMenu.js":9,"./../construct/newScapeObject.js":10,"./../core/extend":12,"./../core/init.js":13,"./../fetch/fetchFromScape.js":15,"./../fetch/fetchGlobal.js":16,"./../fetch/fetchGoogleAuth.js":17,"./../fetch/fetchGoogleBq.js":18,"./../fetch/fetchGoogleGeocode.js":19,"./../fetch/fetchScape.js":20,"./../fetch/fetchScapeSchema.js":21,"./../fetch/fetchWfs.js":22,"./../lib/geostats.min.js":23,"./../menu/menuClass.js":25,"./../menu/menuConfig.js":26,"./../menu/menuRequire.js":27,"./../menu/menuStore.js":28,"chroma-js":1}],12:[function(e,t,n){"use strict";function r(e){var t,n,o,a,s,i;for(s=0;s<e.length;s++)if(a=r.prototype,o="string"==typeof e[s].path?e[s].path:!1,t=e[s].extension||!1,o&&t){if(o.indexOf("/")>-1){for(o=o.split("/"),i=0;a[o[i]];i++)a=a[o[i]];n=o[i]}else n=o;a?(a[n]=t,a[n].prototype=r.prototype,e[s].alias&&(a.schema.alias[e[s].alias]=a[n]),e[s].silent||console.log('Extended socioscapes.fn with "'+o+(e[s].alias?'" alias "'+e[s].alias+'".':'".'))):console.log("Sorry, unable to add your extension. Please check the .path string.")}return r.prototype}t.exports=r},{}],13:[function(e,t,n){"use strict";var r=function o(e){var t,n=o.prototype.fetchScape,r=o.prototype.newScapeObject,a=o.prototype.newScapeMenu;return t=n(e||"scape0")||r("scape0",null,"scape"),socioscapes.s=t,a(t)};t.exports=r},{}],14:[function(e,t,n){"use strict";var r=e("./../core/core.js");r.fn.extend([{path:"viewGmapSymbology",alias:"gsymbology",silent:!0,extension:function o(e){var t,n=o.prototype.chroma,a=o.prototype.isValidObject,s=o.prototype.fetchFromScape,i=o.prototype.newCallback,u=o.prototype.newEvent,c=i(arguments),f=function(e){var t,r,o,c,f=this;return e&&e.config&&e.config.gmap?(e.config.gmap.styles=e.config.gmap.styles||{},e.config.gmap.styles["default"]=e.config.gmap.styles["default"]||{fillOpacity:.75,fillColor:"purple",strokeOpacity:.75,strokeColor:"black",strokeWeight:1,zIndex:5,visible:!0,clickable:!0},e.config.gmap.styles.hover=e.config.gmap.styles.hover||{fillOpacity:.75,fillColor:"purple",strokeOpacity:1,strokeColor:"black",strokeWeight:2,zIndex:10,visible:!0,clickable:!0},e.config.gmap.styles.click=e.config.gmap.styles.click||{fillOpacity:1,fillColor:"purple",strokeOpacity:1,strokeColor:"black",strokeWeight:3,zIndex:15,visible:!0,clickable:!0},e.config.features={selected:{},selectedCount:0,selectedLimit:0},this.dataLayer=new google.maps.Data,Object.defineProperty(this,"init",{value:function(){var t=i(arguments),n=s(e.config.layer,"name",e.schema.parent.layer)||!1,r=n?n.data:!1,o=n?n.geom:!1,a="string"==typeof e.config.featureIdProperty?e.config.featureIdProperty.toLowerCase():"dauid",u="string"==typeof e.config.valueIdProperty?e.config.valueIdProperty.toLowerCase():"total";return r&&o&&a&&u?(f.dataLayer.forEach(function(e){f.dataLayer.remove(e)}),f.dataLayer.addGeoJson(o.geoJson,{featureIdProperty:a}),void 0!==r.geoJson.features[0].properties[u]?(f.dataLayer.forEach(function(e){e.G[u]=r.byId[e.G[a]][u]?r.byId[e.G[a]][u]:!1}),f.classify(function(){f.style(function(){f.onHover(),f.onClick(5),t(f)})})):console.log("Sorry, that layer does not contain matching data for the geometry.")):console.log('Sorry, there was a problem with your ".config" options. Did you you set a valid layer? Does your layer have data and geometry? Do the property names in your data and geometry correspond to the "featureIdProperty" and "valueIdProperty" fields?'),f}}),Object.defineProperty(this,"classify",{value:function(){var t=i(arguments),n=a(e)?s(e.config.layer,"name",e.schema.parent.layer):!1,r=n?n.data:!1,o="getClass"+e.config.classification.charAt(0).toUpperCase()+e.config.classification.slice(1),u=parseInt(e.config.breaks);return r&&(f.off(),e.config.classes=n.data.geostats[o](u),f.on(),t(f)),f}}),Object.defineProperty(this,"style",{value:function(){var t,r,o,a,s=i(arguments);return f.dataLayer.setStyle(function(s){return t=n.scale(e.config.colourScale).mode("lab").classes(e.config.classes).out("hex"),r=s.getProperty(e.config.valueIdProperty),o=s.getProperty("hover")?"hover":s.getProperty("selected")?"click":"default",a={fillOpacity:e.config.gmap.styles[o].fillOpacity,fillColor:t(r)||e.config.gmap.styles[o].fillColor,strokeOpacity:e.config.gmap.styles[o].strokeOpacity,strokeColor:n(t(r)).darken(1)||e.config.gmap.styles[o].strokeColor,strokeWeight:e.config.gmap.styles[o].strokeWeight,zIndex:e.config.gmap.styles[o].zIndex,visible:e.config.gmap.styles[o].visible,clickable:e.config.gmap.styles[o].clickable}}),s(f),f}}),Object.defineProperty(this,"on",{value:function(){var t=i(arguments);return f.dataLayer.setMap(e.gmap.mapBase),t(f),f}}),Object.defineProperty(this,"off",{value:function(){var e=i(arguments);return f.dataLayer.setMap(null),e(f),f}}),Object.defineProperty(this,"onHover",{value:function(t){var n;return t=i(arguments),o&&(o.remove(),c.remove()),o=f.dataLayer.addListener("mouseover",function(r){r.feature.getProperty("selected")||r.feature.setProperty("hover",!0),n=u("socioscapes.update.featureHover",{id:r.feature.getProperty(e.config.featureIdProperty),value:r.feature.getProperty(e.config.valueIdProperty)}),document.dispatchEvent(n),t(r.feature)}),c=f.dataLayer.addListener("mouseout",function(e){e.feature.setProperty("hover",!1),n=u("socioscapes.update.featureHover",{id:"",value:""}),document.dispatchEvent(n),t(e.feature)}),f}}),Object.defineProperty(this,"onClick",{value:function(n,o){if(o=i(arguments),r){r.remove();for(var a in e.config.features.selected)e.config.features.selected.hasOwnProperty(a)&&(e.config.features.selected[a].setProperty("selected",!1),delete e.config.features.selected[a])}return e.config.features.selectedLimit=Number.isInteger(n)?n:0,e.config.features.selectedCount=0,r=f.dataLayer.addListener("click",function(n){t=n.feature.getProperty(e.config.featureIdProperty),n.feature.getProperty("selected")?(n.feature.setProperty("selected",!1),e.config.features.selectedCount=e.config.features.selectedLimit?Math.max(e.config.features.selectedCount-1,0):e.config.features.selectedCount,delete e.config.features.selected[t],o(n.feature,!1)):((e.config.features.selectedLimit?e.config.features.selectedLimit>e.config.features.selectedCount:!0)&&(n.feature.setProperty("selected",!0),e.config.features.selectedCount=e.config.features.selectedLimit>e.config.features.selectedCount?e.config.features.selectedCount+1:e.config.features.selectedCount,e.config.features.selected[t]=n.feature),o(n.feature,!0))}),f}}),this):void 0};return e=r.fn.isValidObject(e)?e:this||!1,t=e&&e.schema&&e.config?s(e.config.layer,"name",e.schema.parent.layer):!1,t&&(e.gmap.mapSymbology=new f(e),c(e)),e}}]),r.fn.extend([{path:"viewGmapLabels",alias:"glabel",silent:!0,extension:function a(e){var t,n,r=a.prototype.isValidObject,o=a.prototype.newCallback,s=o(arguments);return e=e||that,r(e)&&(e.config.gmap.styles=e.config.gmap.styles||{},e.config.gmap.styles.mapLabels=e.config.gmap.styles.mapLabels||[{elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:13}]}],n=new google.maps.OverlayView,n.onAdd=function(){t=this.getPanes(),t.mapPane.style.zIndex=150},n.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null},n.draw=function(){},e.gmap.mapBase?(n.setMap(e.gmap.mapBase),e.gmap.mapLabels=new google.maps.StyledMapType(e.config.gmap.styles.mapLabels),e.gmap.mapBase.overlayMapTypes.insertAt(0,e.gmap.mapLabels),e.gmap.mapLabels.layerHack=n,s(e)):s(!1)),e}}]),r.fn.extend([{path:"viewGmapMap",alias:"gmap",silent:!0,extension:function s(e){var t,n=s.prototype.isValidObject,r=s.prototype.fetchGoogleGeocode,o=s.prototype.newCallback,a=o(arguments);return n(e)&&(e.gmap=e.gmap||{},e.config.address=e.config.address||"Toronto, Canada",e.config.gmap=e.config.gmap||{},e.config.gmap.div=e.config.gmap.div||"map-canvas",e.config.gmap.styles=e.config.gmap.styles||{},e.config.gmap.styles.map=e.config.gmap.styles.map||[{featureType:"all",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{visibility:"on"},{saturation:-100}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#dadada"},{saturation:-100}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"},{saturation:-100}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"transit.line",elementType:"geometry.stroke",stylers:[{color:"#dbdbdb"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#dbdbdb"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#d7d7d7"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{color:"#d7d7d7"},{saturation:-100}]},{featureType:"transit.station",elementType:"labels.icon",stylers:[{hue:"#5e5791"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{hue:"#0032ff"},{gamma:"0.45"}]}],t=document.getElementById(e.config.gmap.div),t?r(e.config.address,function(n){n?(e.config.gmap.geocode=n,e.config.gmap.options=e.config.gmap.options||{zoom:11,center:n,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.HYBRID],style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT},disableDefaultUI:!0,addressControlOptions:{position:google.maps.ControlPosition.BOTTOM_CENTER},overviewMapControl:!0,overviewMapControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER,style:google.maps.ZoomControlStyle.LARGE},streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},panControl:!1,panControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},scaleControl:!0,scaleControlOptions:{position:google.maps.ControlPosition.BOTTOM_CENTER}},e.config.gmap.options.styles=e.config.gmap.styles.map,e.gmap.mapBase=new google.maps.Map(t,e.config.gmap.options),e.gmap.mapBase.setTilt(45),a(e)):a(!1)}):console.log("Sorry, unable to located the view's config.gmap.div element.")),e}}]),r.fn.extend([{path:"viewGmapView",alias:"gview",silent:!0,extension:function i(e,t){var n=i.prototype.isValidObject,r=i.prototype.newCallback,o=r(arguments),a=i.prototype.viewGmapMap,s=i.prototype.viewGmapLabels,u=i.prototype.viewGmapSymbology;return t=t||e,n(t)&&(t.gmap.mapBase?t.gmap.mapLabels?u(t,function(e){e&&t.gmap.mapSymbology.init(function(e){e&&(t.gmap.mapSymbology.on(),o(t))})}):s(t,function(e){e&&u(t,function(e){e&&t.gmap.mapSymbology.init(function(e){e&&(t.gmap.mapSymbology.on(),o(t))})})}):a(t,function(e){e&&s(t,function(e){e&&u(t,function(e){e&&t.gmap.mapSymbology.init(function(e){e&&(t.gmap.mapSymbology.on(),o(t))})})})})),e}}])},{"./../core/core.js":11}],15:[function(e,t,n){"use strict";function r(e,t,n){var o=r.prototype.isValidName,a=r.prototype.newCallback;Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var s=a(arguments),i=!1;if(n)if(Number.isInteger(e))i=n[e]?n[e]:!1;else if(o(e))for(var u=0;u<n.length;u++)e===n[u].meta[t]&&(i=n[u]);return s(i),i}t.exports=r},{}],16:[function(e,t,n){(function(e){"use strict";function n(t){var r,o=n.prototype.newCallback,a=o(arguments);return window?r=window[t]:e&&(r=e[t]),a(r),r}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(e,t,n){"use strict";function r(e){var t=r.prototype.newCallback,n=t(arguments);gapi.auth.authorize(e.auth,function(t){t&&t.access_token&&gapi.client.load(e.client.name,e.client.version,function(e){return n(e),e})})}t.exports=r},{}],18:[function(e,t,n){"use strict";function r(e,t){var n=r.prototype.newCallback,o=r.prototype.fetchGoogleAuth,a=r.prototype.geostats;t=t||{};var s,i,u,c=n(arguments),f=t.clientId||!1,l=t.immediate||!1,p=t.scope||!1,h=t.auth||!1,d=t&&t.featureIdProperty?t.featureIdProperty.toLowerCase():"dauid",g=1,m=0,b=t&&t.normalizationIdProperty?t.normalizationIdProperty.toLowerCase():"none",y=t.id||!1,v=t.projectId||!1,w=t.queryString||!1,k=t&&t.valueIdProperty?t.valueIdProperty.toLowerCase():"total",j={auth:{client_id:f,scope:p||["https://www.googleapis.com/auth/bigquery"],immediate:l||!0},client:{name:"bigquery",version:"v2"},query:{projectId:v,timeoutMs:"30000",query:w}};return h?(gapi.auth.setToken({access_token:h.access_token}),gapi.client.load("bigquery","v2",function(){s(h)})):o(j,function(){s()}),s=function(){i=gapi.client.bigquery.jobs.query(j.query),i.execute(function(e){u={meta:{bqQueryString:w,bqTableId:y,columns:[],errors:[],featureIdProperty:d,normalizationIdProperty:b,valueIdProperty:k,source:"Google BigQuery, "+j.client.version,totalRows:parseInt(e.totalRows)},byColumn:{},byId:{},geoJson:{type:"FeatureCollection",features:[]},raw:e};for(var t=0;t<e.schema.fields.length;t++)u.meta.columns.push(e.schema.fields[t].name.toLowerCase()),u.byColumn[e.schema.fields[t].name.toLowerCase()]=[],g=e.schema.fields[t].name.toLowerCase()===d?t:g,m=e.schema.fields[t].name.toLowerCase()===k?t:m;e.rows.forEach(function(t){for(var n=0,r={};n<t.f.length;n++)isNaN(t.f[n].v)&&(u.meta.errors.push(t.f[n]),t.f[n].v=0),n===m&&(t.f[n].v=parseFloat(t.f[n].v)),isNaN(t.f[n].v)&&(u.meta.errors.push(t.f[n]),t.f[n].v=0),r[e.schema.fields[n].name]=t.f[n].v,u.byColumn[e.schema.fields[n].name].push(t.f[n].v);u.geoJson.features.push({type:"Feature",properties:r}),u.byId[r[d]]=r}),u.geostats=new a(u.byColumn[k]),c(u)})},e}t.exports=r},{}],19:[function(e,t,n){"use strict";function r(e){var t=o(arguments),n=new google.maps.Geocoder,r={};n.geocode({address:e},function(n,o){o===google.maps.GeocoderStatus.OK?(r.lat=n[0].geometry.location.lat(),r.lng=n[0].geometry.location.lng(),r.raw=n,t(r)):console.log("Error: Google Geocoder was unable to locate "+e)})}var o=e("./../construct/newCallback.js");t.exports=r},{"./../construct/newCallback.js":5}],20:[function(e,t,n){"use strict";function r(e){var t,n=r.prototype.fetchGlobal,o=r.prototype.isValidObject,a=r.prototype.newCallback,s=a(arguments);return"string"==typeof e?n(e)&&o(n(e))&&(t=n(e)):o(e)&&(t=e),s(t),t}t.exports=r},{}],21:[function(e,t,n){"use strict";var r=function o(e){var t,n=o.prototype.newCallback,r=n(arguments),a=o.prototype.schema.index;return e=e.indexOf(".")>-1?e.split(".")[0]:e,e&&(t=a[e].schema),r(t),t};t.exports=r},{}],22:[function(e,t,n){"use strict";function r(e,t){var n,o=r.prototype.newCallback,a=o(arguments),s=new XMLHttpRequest;return s.overrideMimeType("application/json"),s.open("GET",t,!0),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&(n={},n.geoJson=JSON.parse(s.responseText),n.meta={},n.meta.crs=n.geoJson.crs.properties.name,n.meta.totalFeatures=parseInt(n.geoJson.totalFeatures),n.meta.type="geoJson",n.meta.source="Web Feature Service",n.meta.wfsQueryString=t,a(n))},s.send(null),e}t.exports=r},{}],23:[function(n,r,o){!function(t){"object"==typeof o?r.exports=t():"function"==typeof e&&e.amd?e(t):geostats=t()}(function(){var e=function(e){return"number"==typeof e&&parseFloat(e)==parseInt(e,10)&&!isNaN(e)};return Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var n=this.length>>>0;for(t=+t||0,1/0===Math.abs(t)&&(t=0),0>t&&(t+=n,0>t&&(t=0));n>t;t++)if(this[t]===e)return t;return-1}),function(n){this.objectID="",this.legendSeparator=this.separator=" - ",this.method="",this.precision=0,this.precisionflag="auto",this.roundlength=2,this.silent=this.debug=this.is_uniqueValues=!1,this.bounds=[],this.ranges=[],this.inner_ranges=null,this.colors=[],this.counter=[],this.stat_cov=this.stat_stddev=this.stat_variance=this.stat_pop=this.stat_min=this.stat_max=this.stat_sum=this.stat_median=this.stat_mean=this.stat_sorted=null,this.log=function(e,t){1!=this.debug&&null==t||console.log(this.objectID+"(object id) :: "+e)},this.setBounds=function(e){this.log("Setting bounds ("+e.length+") : "+e.join()),this.bounds=[],this.bounds=e},this.setSerie=function(e){this.log("Setting serie ("+e.length+") : "+e.join()),this.serie=[],this.serie=e,this.setPrecision()},this.setColors=function(e){this.log("Setting color ramp ("+e.length+") : "+e.join()),this.colors=e},this.doCount=function(){if(!this._nodata()){var e=this.sorted();for(this.counter=[],i=0;i<this.bounds.length-1;i++)this.counter[i]=0;for(j=0;j<e.length;j++){var t=this.getClass(e[j]);this.counter[t]++}}},this.setPrecision=function(e){if("undefined"!=typeof e&&(this.precisionflag="manual",this.precision=e),"auto"==this.precisionflag)for(e=0;e<this.serie.length;e++){var t=isNaN(this.serie[e]+"")||-1==(this.serie[e]+"").toString().indexOf(".")?0:(this.serie[e]+"").split(".")[1].length;t>this.precision&&(this.precision=t)}this.log("Calling setPrecision(). Mode : "+this.precisionflag+" - Decimals : "+this.precision),this.serie=this.decimalFormat(this.serie)},this.decimalFormat=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];!isNaN(parseFloat(r))&&isFinite(r)?t[n]=parseFloat(e[n].toFixed(this.precision)):t[n]=e[n]}return t},this.setRanges=function(){for(this.ranges=[],i=0;i<this.bounds.length-1;i++)this.ranges[i]=this.bounds[i]+this.separator+this.bounds[i+1]},this.min=function(){return this._nodata()?void 0:this.stat_min=Math.min.apply(null,this.serie)},this.max=function(){return this.stat_max=Math.max.apply(null,this.serie)},this.sum=function(){if(!this._nodata()){if(null==this.stat_sum)for(i=this.stat_sum=0;i<this.pop();i++)this.stat_sum+=parseFloat(this.serie[i]);return this.stat_sum}},this.pop=function(){return this._nodata()?void 0:(null==this.stat_pop&&(this.stat_pop=this.serie.length),this.stat_pop)},this.mean=function(){return this._nodata()?void 0:(null==this.stat_mean&&(this.stat_mean=parseFloat(this.sum()/this.pop())),this.stat_mean)},this.median=function(){if(!this._nodata()){if(null==this.stat_median){this.stat_median=0;var e=this.sorted();this.stat_median=e.length%2?parseFloat(e[Math.ceil(e.length/2)-1]):(parseFloat(e[e.length/2-1])+parseFloat(e[e.length/2]))/2}return this.stat_median}},this.variance=function(){if(round="undefined"==typeof round?!0:!1,!this._nodata()){if(null==this.stat_variance){for(var e=0,t=0;t<this.pop();t++)e+=Math.pow(this.serie[t]-this.mean(),2);this.stat_variance=e/this.pop(),1==round&&(this.stat_variance=Math.round(this.stat_variance*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))}return this.stat_variance}},this.stddev=function(e){return e="undefined"==typeof e?!0:!1,this._nodata()?void 0:(null==this.stat_stddev&&(this.stat_stddev=Math.sqrt(this.variance()),1==e&&(this.stat_stddev=Math.round(this.stat_stddev*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))),this.stat_stddev)},this.cov=function(e){return e="undefined"==typeof e?!0:!1,this._nodata()?void 0:(null==this.stat_cov&&(this.stat_cov=this.stddev()/this.mean(),1==e&&(this.stat_cov=Math.round(this.stat_cov*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))),this.stat_cov)},this._nodata=function(){return 0==this.serie.length?(this.silent?this.log("[silent mode] Error. You should first enter a serie!",!0):alert("Error. You should first enter a serie!"),1):0},this._hasNegativeValue=function(){for(i=0;i<this.serie.length;i++)if(0>this.serie[i])return!0;return!1},this._hasZeroValue=function(){for(i=0;i<this.serie.length;i++)if(0===parseFloat(this.serie[i]))return!0;return!1},this.sorted=function(){return null==this.stat_sorted&&(this.stat_sorted=0==this.is_uniqueValues?this.serie.sort(function(e,t){return e-t}):this.serie.sort(function(e,t){var n=e.toString().toLowerCase(),r=t.toString().toLowerCase();return r>n?-1:n>r?1:0})),this.stat_sorted},this.info=function(){if(!this._nodata()){var e;return e=""+("Population : "+this.pop()+" - [Min : "+this.min()+" | Max : "+this.max()+"]\n"),e+="Mean : "+this.mean()+" - Median : "+this.median()+"\n",e+="Variance : "+this.variance()+" - Standard deviation : "+this.stddev()+" - Coefficient of variation : "+this.cov()+"\n"}},this.setClassManually=function(e){
if(!this._nodata()){if(e[0]===this.min()&&e[e.length-1]===this.max())return this.setBounds(e),this.setRanges(),this.method="manual classification ("+(e.length-1)+" classes)",this.bounds;if(this.silent)this.log("[silent mode] "+t("Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max()),!0);else{e=alert;var n="Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max();e(n)}}},this.getClassEqInterval=function(e,t,n){if(!this._nodata()){t="undefined"==typeof t?this.min():t,n="undefined"==typeof n?this.max():n;var r=[],o=t;for(t=(n-t)/e,i=0;i<=e;i++)r[i]=o,o+=t;return r[e]=n,this.setBounds(r),this.setRanges(),this.method="eq. intervals ("+e+" classes)",this.bounds}},this.getQuantiles=function(e){for(var t=this.sorted(),n=[],r=this.pop()/e,o=1;e>o;o++){var a=Math.round(o*r+.49);n.push(t[a-1])}return n},this.getClassQuantile=function(e){if(!this._nodata()){var t=this.sorted(),n=this.getQuantiles(e);return n.unshift(t[0]),n[t.length-1]!==t[t.length-1]&&n.push(t[t.length-1]),this.setBounds(n),this.setRanges(),this.method="quantile ("+e+" classes)",this.bounds}},this.getClassStdDeviation=function(e,t){if(!this._nodata()){this.max(),this.min();var n=[];if(1==e%2){var r=Math.floor(e/2),o=r+1;n[r]=this.mean()-this.stddev()/2,n[o]=this.mean()+this.stddev()/2,i=r-1}else o=e/2,n[o]=this.mean(),i=o-1;for(;0<i;i--)r=n[i+1]-this.stddev(),n[i]=r;for(i=o+1;i<e;i++)r=n[i-1]+this.stddev(),n[i]=r;return n[0]="undefined"==typeof t?n[1]-this.stddev():this.min(),n[e]="undefined"==typeof t?n[e-1]+this.stddev():this.max(),this.setBounds(n),this.setRanges(),this.method="std deviation ("+e+" classes)",this.bounds}},this.getClassGeometricProgression=function(e){if(!this._nodata()){if(!this._hasNegativeValue()&&!this._hasZeroValue()){var t=[],n=this.min(),r=this.max(),r=Math.log(r)/Math.LN10,n=Math.log(n)/Math.LN10,r=(r-n)/e;for(i=0;i<e;i++)t[i]=0==i?n:t[i-1]+r;return t=t.map(function(e){return Math.pow(10,e)}),t.push(this.max()),this.setBounds(t),this.setRanges(),this.method="geometric progression ("+e+" classes)",this.bounds}this.silent?this.log("[silent mode] geometric progression can't be applied with a serie containing negative or zero values.",!0):alert("geometric progression can't be applied with a serie containing negative or zero values.")}},this.getClassArithmeticProgression=function(e){if(!this._nodata()){var t=0;for(i=1;i<=e;i++)t+=i;var n=[],r=this.min(),t=(this.max()-r)/t;for(i=0;i<=e;i++)n[i]=0==i?r:n[i-1]+i*t;return this.setBounds(n),this.setRanges(),this.method="arithmetic progression ("+e+" classes)",this.bounds}},this.getClassJenks=function(e){if(!this._nodata()){dataList=this.sorted();for(var t=[],n=0,r=dataList.length+1;r>n;n++){for(var o=[],a=0,s=e+1;s>a;a++)o.push(0);t.push(o)}for(n=[],r=0,o=dataList.length+1;o>r;r++){for(var a=[],s=0,i=e+1;i>s;s++)a.push(0);n.push(a)}for(r=1,o=e+1;o>r;r++){t[0][r]=1,n[0][r]=0;for(var u=1,a=dataList.length+1;a>u;u++)n[u][r]=1/0;u=0}for(r=2,o=dataList.length+1;o>r;r++){for(var i=s=a=0,c=1,f=r+1;f>c;c++){var l=r-c+1,u=parseFloat(dataList[l-1]),s=s+u*u,a=a+u,i=i+1,u=s-a*a/i,p=l-1;if(0!=p)for(var h=2,d=e+1;d>h;h++)n[r][h]>=u+n[p][h-1]&&(t[r][h]=l,n[r][h]=u+n[p][h-1])}t[r][1]=1,n[r][1]=u}for(u=dataList.length,n=[],r=0;e>=r;r++)n.push(0);for(n[e]=parseFloat(dataList[dataList.length-1]),n[0]=parseFloat(dataList[0]),r=e;r>=2;)o=parseInt(t[u][r]-2),n[r-1]=dataList[o],u=parseInt(t[u][r]-1),--r;return n[0]==n[1]&&(n[0]=0),this.setBounds(n),this.setRanges(),this.method="Jenks ("+e+" classes)",this.bounds}},this.getClassUniqueValues=function(){if(!this._nodata()){this.is_uniqueValues=!0;var e=this.sorted(),t=[];for(i=0;i<this.pop();i++)-1===t.indexOf(e[i])&&t.push(e[i]);return this.bounds=t,this.method="unique values",t}},this.getClass=function(e){for(i=0;i<this.bounds.length;i++)if(1==this.is_uniqueValues){if(e==this.bounds[i])return i}else if(parseFloat(e)<=this.bounds[i+1])return i;return"Unable to get value's class."},this.getRanges=function(){return this.ranges},this.getRangeNum=function(e){var t,n;for(n=0;n<this.ranges.length;n++)if(t=this.ranges[n].split(/ - /),e<=parseFloat(t[1]))return n},this.getInnerRanges=function(){if(null!=this.inner_ranges)return this.inner_ranges;var e=[],t=this.sorted(),n=1;for(i=0;i<t.length;i++){if(0==i)var r=t[i];if(parseFloat(t[i])>parseFloat(this.bounds[n])&&(e[n-1]=""+r+this.separator+t[i-1],r=t[i],n++),n==this.bounds.length-1)return e[n-1]=""+r+this.separator+t[t.length-1],this.inner_ranges=e}},this.getSortedlist=function(){return this.sorted().join(", ")},this.getHtmlLegend=function(t,n,r,o,a,s){var u="",c=[];if(this.doCount(),ccolors=null!=t?t:this.colors,lg=null!=n?n:"Legend",getcounter=null!=r?!0:!1,fn=null!=o?o:function(e){return e},null==a&&(a="default"),"discontinuous"==a&&(this.getInnerRanges(),-1!==this.counter.indexOf(0)))return void(this.silent?this.log("[silent mode] geostats cannot apply 'discontinuous' mode to the getHtmlLegend() method because some classes are not populated.\nPlease switch to 'default' or 'distinct' modes. Exit!",!0):alert("geostats cannot apply 'discontinuous' mode to the getHtmlLegend() method because some classes are not populated.\nPlease switch to 'default' or 'distinct' modes. Exit!"));if("DESC"!==s&&(s="ASC"),!(ccolors.length<this.ranges.length)){if(0==this.is_uniqueValues)for(i=0;i<this.ranges.length;i++)!0===getcounter&&(u=' <span class="geostats-legend-counter">('+this.counter[i]+")</span>"),n=this.ranges[i].split(this.separator),t=parseFloat(n[0]).toFixed(this.precision),n=parseFloat(n[1]).toFixed(this.precision),"distinct"==a&&0!=i&&(e(t)?(t=parseInt(t)+1,"manual"==this.precisionflag&&0!=this.precision&&(t=parseFloat(t).toFixed(this.precision))):(t=parseFloat(t)+1/Math.pow(10,this.precision),t=parseFloat(t).toFixed(this.precision))),"discontinuous"==a&&(n=this.inner_ranges[i].split(this.separator),t=parseFloat(n[0]).toFixed(this.precision),n=parseFloat(n[1]).toFixed(this.precision)),t=fn(t)+this.legendSeparator+fn(n),t='<div><div class="geostats-legend-block" style="background-color:'+ccolors[i]+'"></div> '+t+u+"</div>",c.push(t);else for(i=0;i<this.bounds.length;i++)!0===getcounter&&(u=' <span class="geostats-legend-counter">('+this.counter[i]+")</span>"),t=fn(this.bounds[i]),t='<div><div class="geostats-legend-block" style="background-color:'+ccolors[i]+'"></div> '+t+u+"</div>",c.push(t);for("DESC"===s&&c.reverse(),a='<div class="geostats-legend"><div class="geostats-legend-title">'+lg+"</div>",i=0;i<c.length;i++)a+=c[i];return a+"</div>"}this.silent?this.log("[silent mode] The number of colors should fit the number of ranges. Exit!",!0):alert("The number of colors should fit the number of ranges. Exit!")},this.objectID=(new Date).getUTCMilliseconds(),this.log("Creating new geostats object"),"undefined"!=typeof n&&0<n.length?(this.serie=n,this.setPrecision(),this.log("Setting serie ("+n.length+") : "+n.join())):this.serie=[],this.getJenks=this.getClassJenks,this.getGeometricProgression=this.getClassGeometricProgression,this.getEqInterval=this.getClassEqInterval,this.getQuantile=this.getClassQuantile,this.getStdDeviation=this.getClassStdDeviation,this.getUniqueValues=this.getClassUniqueValues,this.getArithmeticProgression=this.getClassArithmeticProgression}})},{}],24:[function(e,t,n){"use strict";var r,o=e("./core/core.js");r=e("./extension/gmaps.js"),t.exports=o},{"./core/core.js":11,"./extension/gmaps.js":14}],25:[function(e,t,n){"use strict";function r(e,t){var n=r.prototype.fetchFromScape;return n(t||e.schema.name,"name",e.schema.container)}t.exports=r},{}],26:[function(e,t,n){"use strict";function r(e,t,n){var o,a=r.prototype.newCallback,s=r.prototype.newEvent,i=a(arguments),u=e.that,c=socioscapes.fn[t]||socioscapes.fn.schema.alias[t]||("function"==typeof t?t:!1);return n="object"==typeof n?n:{name:n||t},c&&e.that.dispatcher.dispatch({myFunction:c,myArguments:[e.that,n],myThis:e.that},function(n){n&&(console.log('The results of your "'+t+'" are ready.'),u=n,o=s("socioscapes.ready."+c.name,e),document.dispatchEvent(o))}),i(u),u}t.exports=r},{}],27:[function(e,t,n){"use strict";function r(e,t,n){var o=r.prototype.newCallback,a=o(arguments);return a(e.that),e.that}t.exports=r},{}],28:[function(e,t,n){"use strict";function r(e,t,n){var o,a=r.prototype.newCallback,s=r.prototype.newEvent,i=a(arguments),u=e.that,c=socioscapes.fn[t]||socioscapes.fn.schema.alias[t]||("function"==typeof t?t:!1);return c?e.that.dispatcher.dispatch({myFunction:c,myArguments:[e.that,n]},function(n){if(n){for(var r in n)n.hasOwnProperty(r)&&(delete e.object[r],e.object[r]=n[r]);console.log('The results of your "'+t+'" query are ready.'),u=n,o=s("socioscapes.ready."+c.name,e),document.dispatchEvent(o)}}):console.log('Sorry, "'+t+'" is not a valid function.'),i(u),u}t.exports=r},{}]},{},[24])(24)});