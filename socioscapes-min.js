!function e(t,s,n){function c(o,r){if(!s[o]){if(!t[o]){var i="function"==typeof require&&require;if(!r&&i)return i(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=s[o]={exports:{}};t[o][0].call(l.exports,function(e){var s=t[o][1][e];return c(s?s:e)},l,l.exports,e,t,s,n)}return s[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)c(n[o]);return c}({1:[function(e,t,s){"use strict";function n(e){var t=c(arguments),s=!1,n=["help","abstract","arguments","Array","boolean","break","byte","case","catch","char","class","const","continue","debugger","Date","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","hasOwnProperty","if","implements","import","in","instanceof","int","interface","isFinite","isNaN","isPrototypeOf","Infinity","length","let","long","native","Math","name","new","NaN","Number","null","Object","package","private","protected","prototype","public","return","short","static","super","switch","synchronized","String","this","throw","throws","toString","transient","true","try","typeof","undefined","valueOf","var","void","volatile","while","with","yield"];return e&&"string"==typeof e&&(/^[-A-Z0-9]+$/i.test(e)?-1===n.indexOf(e)?s=!0:console.log('Sorry, "'+e+'" is not a valid name because it is a reserved word. The full list of reserved words is: '+n):console.log("Sorry, that is not a valid name. Valid names can only contain letters (a to Z), numbers (0-9), or dashes (-).")),t(s),s}var c=e("./../construct/newDispatcherCallback.js");t.exports=n},{"./../construct/newDispatcherCallback.js":5}],2:[function(e,t,s){"use strict";function n(e){var t=c(arguments),s=!1;return e&&e.meta&&e.meta.type&&e.meta.type.indexOf("scape.sociJson")>-1&&(s=!0),t(s),s}var c=e("./../construct/newDispatcherCallback.js");t.exports=n},{"./../construct/newDispatcherCallback.js":5}],3:[function(e,t,s){"use strict";function n(e){var t=c(arguments),s=!1;return e&&("string"==typeof e&&/^(http|HTTP|https|HTTPS|ftp|FTP|ftps|FTPS):\/\/(([a-zA-Z0-9$\-_.+!*'(),;:&=]|%[0-9a-fA-F]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])){3})|localhost|([a-zA-Z0-9\-\u00C0-\u017F]+\.)+([a-zA-Z]{2,}))(:[0-9]+)?(\/(([a-zA-Z0-9$\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*(\/([a-zA-Z0-9$\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*)*)?(\?([a-zA-Z0-9$\-_.+!*'(),;:@&=\/?]|%[0-9a-fA-F]{2})*)?(\#([a-zA-Z0-9$\-_.+!*'(),;:@&=\/?]|%[0-9a-fA-F]{2})*)?)?$/.test(e)?s=!0:console.log()),t(s),s}var c=e("./../construct/newDispatcherCallback.js");t.exports=n},{"./../construct/newDispatcherCallback.js":5}],4:[function(e,t,s){"use strict";function n(){var e=function(e,t,s){for(var n=[];e.myFunction.length>e.myArguments.length;)e.myArguments.push(null);for(var c=0;c<e.myArguments.length;c++)n.push(e.myArguments[c]);n.push(s),e.myFunction.apply(t,n)},t=function(){var t,s,n=[],c=!0,a=this;return this.dispatcher=function(o,r){if(o&&o.myFunction&&"function"==typeof o.myFunction&&(r=r&&"function"==typeof r?r:function(e){return e},n.push({myFunction:o.myFunction,myArguments:o.myArguments,myThis:o.myThis,myReturn:o.myReturn,myCallback:r}),a.dispatcher()),!o&&c)for(;n.length>0;)c===!0&&(c=!1,s=n.shift(),s.myThis=s.myThis?s.myThis:t,e(s,s.myThis,function(e){"function"==typeof s.myCallback&&s.myCallback(e),t=s.myReturn?s.myReturn:e,c=!0,a.dispatcher()}))},Object.defineProperty(this.dispatcher,"result",{value:function(){return t}}),Object.defineProperty(this.dispatcher,"status",{value:function(){return c}}),Object.defineProperty(this.dispatcher,"queue",{value:function(){return n}}),Object.defineProperty(this,"dispatcher",{configurable:!1}),this.dispatcher};return new t}t.exports=n},{}],5:[function(e,t,s){"use strict";function n(e){var t;return t="function"==typeof e[e.length-1]?e[e.length-1]:function(e){return e}}t.exports=n},{}],6:[function(e,t,s){"use strict";function n(e,t){var s=c(arguments);return new CustomEvent(e,{detail:{message:t,time:new Date},bubbles:!0,cancelable:!0}),s(!0),!0}var c=e("./../construct/newDispatcherCallback.js");t.exports=n},{"./../construct/newDispatcherCallback.js":5}],7:[function(e,t,s){(function(s){"use strict";function n(e,t,n){var o,r=a(arguments);return c(e)?n?window?(window[e]=t,o=window[e]):s&&(s[e]=t,o=s[e]):console.log('Sorry, a global object called "'+e+'" already exists.'):(window?(window[e]=t,o=window[e]):s&&(window[e]=t,o=window[e]),console.log('Creating a new global object called "'+e+'".')),r(o),o}var c=e("./../fetch/fetchGlobal.js"),a=e("./../construct/newDispatcherCallback.js");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../construct/newDispatcherCallback.js":5,"./../fetch/fetchGlobal.js":16}],8:[function(e,t,s){"use strict";var n=(socioscapes.fn.fetchScapeObject,socioscapes.fn.isValidObject),c=socioscapes.fn.newDispatcherCallback,a=socioscapes.fn.newScapeObject;socioscapes.fn.extend([{path:"newScapeMenu",extension:function(e){var t=c(arguments),s=!1,o=function(e){var t,s=this,n=e.schema,c=n["class"],r=n.parent,i=n.type;Object.defineProperty(this,"drop",{value:function(){delete window[e]}}),Object.defineProperty(this,"schema",{value:e.schema}),Object.defineProperty(this,"fn",{value:socioscapes.fn}),Object.defineProperty(this,"this",{value:e}),Object.defineProperty(this,"meta",{value:e.meta}),Object.defineProperty(this,"new",{value:function(s){return s=s||n.name+c.length,e.dispatcher({myFunction:a,myArguments:[s,r,i]},function(e){e&&(t=new o(e))}),t}}),Object.defineProperty(this,"store",{value:""});for(var u=0;u<n.children.length;u++)!function(c){var a,r,i,u=c["class"];u.match(/\[(.*?)]/g)&&(u=/\[(.*?)]/g.exec(u)[1],a=!0),r=a?n[u][0]:n[u],i={myChild:c,myChildSchema:r,myScapeObjectValue:e[u],ScapeMenu:o,that:s},r.menu&&Object.defineProperty(s,u,{value:function(){var s=[];s.push(i);for(var n=0;n<arguments.length;n++)s.push(arguments[n]);return e.dispatcher({myFunction:r.menu,myArguments:s,myThis:e},function(e){e&&(t=new o(e))}),t}})}(n.children[u])};return n(e)&&(s=new o(e)),t(s),s}}])},{}],9:[function(e,t,s){"use strict";var n=socioscapes.fn.fetchFromScape,c=socioscapes.fn.fetchGlobal,a=socioscapes.fn.fetchScapeObject,o=socioscapes.fn.newDispatcherCallback,r=socioscapes.fn.newDispatcher,i=socioscapes.fn.newGlobal,u=socioscapes.fn.newScapeSchema;socioscapes.fn.extend([{path:"newScapeObject",extension:function(e,t,s){var l=o(arguments),f=u(s),h=!1,p=function(e,t,s){var n=t?t.dispatcher:r();Object.defineProperty(this,"dispatcher",{value:n}),Object.defineProperty(this,"schema",{value:s}),Object.defineProperty(this.schema,"parent",{value:t||!1}),this.schema.container||Object.defineProperty(this.schema,"container",{value:t?t[s["class"]]:!1}),Object.defineProperty(this,"meta",{value:{},enumerable:!0}),Object.defineProperty(this.meta,"author",{value:"",configurable:!0,enumerable:!0}),Object.defineProperty(this.meta,"name",{value:e,configurable:!0,enumerable:!0}),Object.defineProperty(this.meta,"summary",{value:"",configurable:!0,enumerable:!0}),Object.defineProperty(this.meta,"type",{value:s.type,enumerable:!0});for(var c=0;c<s.children.length;c++){var a,o,i,u,l=s.children[c]["class"];l.match(/\[(.*?)]/g)&&(l=/\[(.*?)]/g.exec(l)[1],a=!0),i=a?s[l][0]:s[l],o=i.name||i["class"],u=i.value||[],this[l]||Object.defineProperty(this,l,{value:u,enumerable:!0}),a&&this[l].push(new p(o,this,i))}};return t=a(t),e&&(t?f&&(n(e,"name",t[f["class"]])?(console.log('Fetching existing scape object "'+e+'" of class "'+f["class"]+'".'),h=n(e,"name",t[f["class"]])):(console.log("Adding a new "+f["class"]+' called "'+e+'" to the "'+t.meta.name+'" '+t.schema["class"]+"."),h=new p(e,t,f),t[f["class"]].push(h))):a(e)?(console.log('Fetching exisisting scape "'+e+'".'),h=a(e)):c(e)?console.log('Sorry, there is already a global object called "'+e+'".'):(console.log('Creating a new scape called "'+e+'".'),h=new p(e,null,f),i(e,h))),l(h),h}}])},{}],10:[function(e,t,s){"use strict";var n,c="0.5.5",a=e("./extend.js"),o=e("./../fetch/fetchFromScape.js"),r=e("./../fetch/fetchGlobal.js"),i=e("./../fetch/fetchGoogleAuth.js"),u=e("./../fetch/fetchGoogleBq.js"),l=e("./../fetch/fetchGoogleGeocode.js"),f=e("./../fetch/fetchScapeObject.js"),h=e("./../fetch/fetchWfs.js"),p=e("./../bool/isValidObject.js"),m=e("./../bool/isValidName.js"),d=e("./../bool/isValidUrl.js"),b=e("./../menu/menuClass.js"),j=e("./../menu/menuConfig.js"),g=e("./../menu/menuData.js"),y=e("./../menu/menuGeom.js"),w=e("./../menu/menuRequire.js"),v=e("./../construct/newDispatcher.js"),C=e("./../construct/newDispatcherCallback.js"),x=e("./../construct/newEvent.js"),O=e("./../construct/newGlobal.js"),D=e("./test.js");n=function(e){return new n.fn.init(e)},n.fn=n.prototype={constructor:n,extend:a,fetchFromScape:o,fetchGlobal:r,fetchGoogleAuth:i,fetchGoogleBq:u,fetchGoogleGeocode:l,fetchScapeObject:f,fetchWfs:h,init:function(){},isValidObject:p,isValidName:m,isValidUrl:d,menuClass:b,menuConfig:j,menuData:g,menuGeom:y,menuRequire:w,newDispatcher:v,newDispatcherCallback:C,newEvent:x,newGlobal:O,test:D,version:c},O("socioscapes",n,!0),t.exports=n},{"./../bool/isValidName.js":1,"./../bool/isValidObject.js":2,"./../bool/isValidUrl.js":3,"./../construct/newDispatcher.js":4,"./../construct/newDispatcherCallback.js":5,"./../construct/newEvent.js":6,"./../construct/newGlobal.js":7,"./../fetch/fetchFromScape.js":15,"./../fetch/fetchGlobal.js":16,"./../fetch/fetchGoogleAuth.js":17,"./../fetch/fetchGoogleBq.js":18,"./../fetch/fetchGoogleGeocode.js":19,"./../fetch/fetchScapeObject.js":20,"./../fetch/fetchWfs.js":21,"./../menu/menuClass.js":23,"./../menu/menuConfig.js":24,"./../menu/menuData.js":25,"./../menu/menuGeom.js":26,"./../menu/menuRequire.js":27,"./extend.js":11,"./test.js":14}],11:[function(e,t,s){"use strict";function n(e){var t,s,n,c,a,o;for(a=0;a<e.length;a++)if(c=socioscapes.fn,n="string"==typeof e[a].path?e[a].path:!1,t=e[a].extension||!1,n&&t){if(n.indexOf("/")>-1){for(n=n.split("/"),o=0;c[n[o]];o++)c=c[n[o]];s=n[o]}else s=n;c?(console.log('Extending socioscapes.fn with "'+n+'".'),c[s]=t):console.log("Sorry, unable to add your extension. Please check your .path string.")}return socioscapes.fn}t.exports=n},{}],12:[function(e,t,s){"use strict";var n=socioscapes.fn.fetchScapeObject,c=socioscapes.fn.newScapeObject,a=socioscapes.fn.newScapeMenu;socioscapes.fn.extend([{path:"init",extension:function(e){var t;return t=e?n(e):c(e||"scape0",null,"scape"),this.s=a(t),this.s}}])},{}],13:[function(e,t,s){"use strict";var n=socioscapes.fn.menuClass,c=socioscapes.fn.menuConfig,a=socioscapes.fn.menuData,o=socioscapes.fn.menuGeom,r=socioscapes.fn.menuRequire,i=socioscapes.fn.newDispatcherCallback;socioscapes.fn.extend([{path:"schema",extension:{}},{path:"schema/structure",extension:{scape:{children:[{"class":"[state]"}],"class":"scape",menu:n,name:"scape",state:[{"class":"state",children:[{"class":"[layer]"},{"class":"[view]"}],layer:[{children:[{"class":"data"},{"class":"geom"}],"class":"layer",data:{menu:a,value:{}},geom:{menu:o,value:{}},menu:n,name:"layer0",parent:"state",type:"layer.state.scape.sociJson"}],menu:n,name:"state0",parent:"scape",type:"state.scape.sociJson",view:[{config:{menu:c,value:{}},children:[{"class":"config"},{"class":"require"}],"class":"view",menu:n,name:"view0",parent:"state",require:{menu:r,value:[]},type:"view.state.scape.sociJson"}]}],type:"scape.sociJson"}}}]),socioscapes.fn.extend([{path:"schema/classes",extension:["scape","state","layer","view"]},{path:"schema/types",extension:["scape.sociJson","state.scape.sociJson","layer.state.scape.sociJson","view.state.scape.sociJson"]},{path:"schema/index",extension:{scape:socioscapes.fn.schema.structure.scape,state:socioscapes.fn.schema.structure.scape.state[0],layer:socioscapes.fn.schema.structure.scape.state[0].layer[0],view:socioscapes.fn.schema.structure.scape.state[0].view[0]}},{path:"newScapeSchema",extension:function(e){var t,s,n=i(arguments),c=!1,a=socioscapes.fn.schema.types,o=socioscapes.fn.schema.classes,r=socioscapes.fn.schema.index;return s=a.indexOf(e)>-1?e.split(".")[0]:!1,t=o.indexOf(e)>-1?e:!1,(s||t)&&(c=r[s||t]),n(c),c}}])},{}],14:[function(e,t,s){"use strict";function n(e,t){var s={};return s.bq={id:"2011_census_of_canada",clientId:t?t:"424138972496-nlcip7t83lb1ll7go1hjoc77jgc689iq.apps.googleusercontent.com",projectId:t?t.split("-")[0]:"424138972496",queryString:"SELECT Geo_Code, Total FROM [2011_census_of_canada.british_columbia_da] WHERE (Characteristic CONTAINS 'Population in 2011' AND Total IS NOT NULL) GROUP BY Geo_Code, Total, LIMIT 10;"},s.wfs="http://app.socioscapes.com:8080/geoserver/socioscapes/ows?service=WFS&version=2.0.0&request=GetFeature&typeName=socioscapes:2011-canada-census-da&outputFormat=json&cql_filter=cmaname=%27Toronto%27",s.all={bq:s.bq,wfs:s.wfs},s[e]}t.exports=n},{}],15:[function(e,t,s){"use strict";function n(e,t,s){var n=a(arguments),o=!1;if(s)if(Number.isInteger(e))o=s[e]?s[e]:!1;else if(c(e))for(var r=0;r<s.length;r++)e===s[r].meta[t]&&(o=s[r]);return n(o),o}var c=e("./../bool/isValidName.js"),a=e("./../construct/newDispatcherCallback.js");Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.exports=n},{"./../bool/isValidName.js":1,"./../construct/newDispatcherCallback.js":5}],16:[function(e,t,s){(function(s){"use strict";function n(e){var t,n=c(arguments);return window?t=window[e]:s&&(t=s[e]),n(t),t}var c=e("./../construct/newDispatcherCallback.js");t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../construct/newDispatcherCallback.js":5}],17:[function(e,t,s){"use strict";function n(e){var t=c(arguments);gapi.auth.authorize(e.auth,function(s){s&&s.access_token&&gapi.client.load(e.client.name,e.client.version,function(e){return t(e),e})})}var c=e("./../construct/newDispatcherCallback.js");t.exports=n},{"./../construct/newDispatcherCallback.js":5}],18:[function(e,t,s){"use strict";function n(e){var t,s,n=c(arguments),r={},i=[],u=e?e.clientId:!1,l=e?e.id:!1,f=e?e.projectId:!1,h=e?e.queryString:!1,p={auth:{client_id:u,scope:["https://www.googleapis.com/auth/bigquery"],immediate:!0},client:{name:"bigquery",version:"v2"},query:{projectId:f,timeoutMs:"30000",query:h}};e&&a(p,function(){t=gapi.client.bigquery.jobs.query(p.query),t.execute(function(e){for(var t=0;t<e.schema.fields.length;t++)r["column"+t]=e.schema.fields[t].name;r.columns=e.schema.fields.length,s=parseFloat(e.result.totalRows),r.rows=s,o(e,function(e){return i.push(e),i.length===s?(r.values=i,r.query=h,r.name=l,n(r),r):void 0})})})}var c=e("./../construct/newDispatcherCallback.js"),a=e("./../fetch/fetchGoogleAuth.js"),o=function(e,t){var s={};t&&e.result.rows.forEach(function(e){for(var n=0;n<e.f.length;n++)s[n]=e.f[n].v;t(s)})};t.exports=n},{"./../construct/newDispatcherCallback.js":5,"./../fetch/fetchGoogleAuth.js":17}],19:[function(e,t,s){"use strict";function n(e){var t=c(arguments),s=new google.maps.Geocoder,n={};s.geocode({address:e},function(s,c){return c===google.maps.GeocoderStatus.OK?(n.lat=s[0].geometry.location.lat(),n["long"]=s[0].geometry.location.lng(),t(n),n):void console.log("Error: Google Geocoder was unable to locate "+e)})}var c=e("./../construct/newDispatcherCallback.js");t.exports=n},{"./../construct/newDispatcherCallback.js":5}],20:[function(e,t,s){"use strict";function n(e,t,s){var n=i(arguments),u="string"==typeof e?c(e):o(e)?e:!1,l=u?!1:o(t),f=l?!1:r(t);return u||!l&&!f||l&&(u=a(e,"name",t[s])),n(u),u}var c=e("./../fetch/fetchGlobal.js"),a=e("./../fetch/fetchFromScape.js"),o=e("./../bool/isValidObject.js"),r=e("./../bool/isValidUrl.js"),i=e("./../construct/newDispatcherCallback.js");t.exports=n},{"./../bool/isValidObject.js":2,"./../bool/isValidUrl.js":3,"./../construct/newDispatcherCallback.js":5,"./../fetch/fetchFromScape.js":15,"./../fetch/fetchGlobal.js":16}],21:[function(e,t,s){"use strict";function n(e){var t,s=c(arguments),n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onreadystatechange=function(){return 4==n.readyState&&"200"==n.status?(t={},t.features=n.responseText,t.url=e,s(t),t):void 0},n.send(null)}var c=e("./../construct/newDispatcherCallback.js");t.exports=n},{"./../construct/newDispatcherCallback.js":5}],22:[function(e,t,s){"use strict";{var n=e("./core/core.js");e("./core/schema.js"),e("./construct/newScapeObject.js"),e("./construct/newScapeMenu.js"),e("./core/init.js")}t.exports=n},{"./construct/newScapeMenu.js":8,"./construct/newScapeObject.js":9,"./core/core.js":10,"./core/init.js":12,"./core/schema.js":13}],23:[function(e,t,s){"use strict";function n(e,t){var s,n=c(arguments);return a(t||e.myChildSchema.name,this,e.myChildSchema["class"],function(e){s=e}),n(s),s}var c=e("./../construct/newDispatcherCallback.js"),a=e("./../fetch/fetchScapeObject.js");t.exports=n},{"./../construct/newDispatcherCallback.js":5,"./../fetch/fetchScapeObject.js":20}],24:[function(e,t,s){"use strict";function n(e,t,s){var n=c(arguments),a={};return a.gmap=setGmap,a.gmaplayer=setGmapLayer,a.gmaplabel=setGmapLabel,a.datatable=setDatatable,a.breaks=setBreaks,a["class"]=setClassification,a.colours=setColourscale,a.domain=setDataDomain,a[e]?this.dispatcher({myFunction:a[e],myArguments:[s,t]},function(t){t&&console.log("Config element "+e+" has been updated.")}):console.log('Sorry, "'+e+'" is not a valid configuration function.'),n(this),this}{var c=e("./../construct/newDispatcherCallback.js");e("./../fetch/fetchGoogleBq.js")}t.exports=n},{"./../construct/newDispatcherCallback.js":5,"./../fetch/fetchGoogleBq.js":18}],25:[function(e,t,s){"use strict";function n(e,t,s){var n=c(arguments),o={};return o.bq=a,o[t]?this.dispatcher({myFunction:o[t],myArguments:[s]},function(t){if(t){console.log("Data fetch has been complete.");for(var s in t)t.hasOwnProperty(s)&&(e.myScapeObjectValue[s]=t[s])}}):console.log('Sorry, "'+t+'" is not a valid fetch function.'),n(this),this}var c=e("./../construct/newDispatcherCallback.js"),a=e("./../fetch/fetchGoogleBq.js");t.exports=n},{"./../construct/newDispatcherCallback.js":5,"./../fetch/fetchGoogleBq.js":18}],26:[function(e,t,s){"use strict";function n(e,t,s){var n=c(arguments),o={};return o.wfs=a,o[t]?this.dispatcher({myFunction:o[t],myArguments:[s]},function(t){if(t){console.log("Geometry fetch has been complete.");for(var s in t)t.hasOwnProperty(s)&&(e.myScapeObjectValue[s]=t[s])}}):console.log('Sorry, "'+t+'" is not a valid fetch function.'),n(this),this}var c=e("./../construct/newDispatcherCallback.js"),a=e("./../fetch/fetchWfs.js");t.exports=n},{"./../construct/newDispatcherCallback.js":5,"./../fetch/fetchWfs.js":21}],27:[function(e,t,s){"use strict";function n(e,t,s){var n=c(arguments);return n(this),this}{var c=e("./../construct/newDispatcherCallback.js");e("./../fetch/fetchGoogleBq.js")}t.exports=n},{"./../construct/newDispatcherCallback.js":5,"./../fetch/fetchGoogleBq.js":18}]},{},[22]);