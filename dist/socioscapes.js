/*! For license information please see socioscapes.js.LICENSE.txt */
(()=>{var e={792:function(e){e.exports=function(){"use strict";for(var e=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e<t?t:e>n?n:e},t={},n=0,r=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<r.length;n+=1){var a=r[n];t["[object "+a+"]"]=a.toLowerCase()}var o=function(e){return t[Object.prototype.toString.call(e)]||"object"},s=Math.PI,i={clip_rgb:function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=e(t[n],0,255)):3===n&&(t[n]=e(t[n],0,1));return t},limit:e,type:o,unpack:function(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==o(e[0])&&t?t.split("").filter((function(t){return void 0!==e[0][t]})).map((function(t){return e[0][t]})):e[0]},last:function(e){if(e.length<2)return null;var t=e.length-1;return"string"==o(e[t])?e[t].toLowerCase():null},PI:s,TWOPI:2*s,PITHIRD:s/3,DEG2RAD:s/180,RAD2DEG:180/s},l={format:{},autodetect:[]},f=i.last,c=i.clip_rgb,u=i.type,h=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=this;if("object"===u(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var r=f(e),a=!1;if(!r){a=!0,l.sorted||(l.autodetect=l.autodetect.sort((function(e,t){return t.p-e.p})),l.sorted=!0);for(var o=0,s=l.autodetect;o<s.length;o+=1){var i=s[o];if(r=i.test.apply(i,e))break}}if(!l.format[r])throw new Error("unknown format: "+e);var h=l.format[r].apply(null,a?e:e.slice(0,-1));n._rgb=c(h),3===n._rgb.length&&n._rgb.push(1)};h.prototype.toString=function(){return"function"==u(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var p=h,d=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(d.Color,[null].concat(e)))};d.Color=p,d.version="2.1.2";var g=d,m=i.unpack,b=Math.max,v=i.unpack,y=i.unpack,w=i.type;p.prototype.cmyk=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=m(e,"rgb"),r=n[0],a=n[1],o=n[2],s=1-b(r/=255,b(a/=255,o/=255)),i=s<1?1/(1-s):0;return[(1-r-s)*i,(1-a-s)*i,(1-o-s)*i,s]}(this._rgb)},g.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["cmyk"])))},l.format.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=v(e,"cmyk"))[0],r=e[1],a=e[2],o=e[3],s=e.length>4?e[4]:1;return 1===o?[0,0,0,s]:[n>=1?0:255*(1-n)*(1-o),r>=1?0:255*(1-r)*(1-o),a>=1?0:255*(1-a)*(1-o),s]},l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=y(e,"cmyk"),"array"===w(e)&&4===e.length)return"cmyk"}});var _=i.unpack,k=i.last,C=function(e){return Math.round(100*e)/100},M=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=_(e,"hsla"),r=k(e)||"lsa";return n[0]=C(n[0]||0),n[1]=C(100*n[1])+"%",n[2]=C(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},P=i.unpack,x=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=P(e,"rgba"))[0],r=e[1],a=e[2];n/=255,r/=255,a/=255;var o,s,i=Math.min(n,r,a),l=Math.max(n,r,a),f=(l+i)/2;return l===i?(o=0,s=Number.NaN):o=f<.5?(l-i)/(l+i):(l-i)/(2-l-i),n==l?s=(r-a)/(l-i):r==l?s=2+(a-n)/(l-i):a==l&&(s=4+(n-r)/(l-i)),(s*=60)<0&&(s+=360),e.length>3&&void 0!==e[3]?[s,o,f,e[3]]:[s,o,f]},O=i.unpack,T=i.last,I=Math.round,F=i.unpack,N=Math.round,E=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r,a,o,s=(t=F(t,"hsl"))[0],i=t[1],l=t[2];if(0===i)r=a=o=255*l;else{var f=[0,0,0],c=[0,0,0],u=l<.5?l*(1+i):l+i-l*i,h=2*l-u,p=s/360;f[0]=p+1/3,f[1]=p,f[2]=p-1/3;for(var d=0;d<3;d++)f[d]<0&&(f[d]+=1),f[d]>1&&(f[d]-=1),6*f[d]<1?c[d]=h+6*(u-h)*f[d]:2*f[d]<1?c[d]=u:3*f[d]<2?c[d]=h+(u-h)*(2/3-f[d])*6:c[d]=h;r=(e=[N(255*c[0]),N(255*c[1]),N(255*c[2])])[0],a=e[1],o=e[2]}return t.length>3?[r,a,o,t[3]]:[r,a,o,1]},j=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,S=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,A=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,L=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,R=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,G=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,q=Math.round,B=function(e){var t;if(e=e.toLowerCase().trim(),l.format.named)try{return l.format.named(e)}catch(e){}if(t=e.match(j)){for(var n=t.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(t=e.match(S)){for(var a=t.slice(1,5),o=0;o<4;o++)a[o]=+a[o];return a}if(t=e.match(A)){for(var s=t.slice(1,4),i=0;i<3;i++)s[i]=q(2.55*s[i]);return s[3]=1,s}if(t=e.match(L)){for(var f=t.slice(1,5),c=0;c<3;c++)f[c]=q(2.55*f[c]);return f[3]=+f[3],f}if(t=e.match(R)){var u=t.slice(1,4);u[1]*=.01,u[2]*=.01;var h=E(u);return h[3]=1,h}if(t=e.match(G)){var p=t.slice(1,4);p[1]*=.01,p[2]*=.01;var d=E(p);return d[3]=+t[4],d}};B.test=function(e){return j.test(e)||S.test(e)||A.test(e)||L.test(e)||R.test(e)||G.test(e)};var D=B,V=i.type;p.prototype.css=function(e){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=O(e,"rgba"),r=T(e)||"rgb";return"hsl"==r.substr(0,3)?M(x(n),r):(n[0]=I(n[0]),n[1]=I(n[1]),n[2]=I(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")}(this._rgb,e)},g.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["css"])))},l.format.css=D,l.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===V(e)&&D.test(e))return"css"}});var z=i.unpack;l.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=z(e,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},g.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["gl"])))},p.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var J=i.unpack,H=i.unpack,$=Math.floor,U=i.unpack,Z=i.type;p.prototype.hcg=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=J(e,"rgb"),a=r[0],o=r[1],s=r[2],i=Math.min(a,o,s),l=Math.max(a,o,s),f=l-i,c=100*f/255,u=i/(255-f)*100;return 0===f?n=Number.NaN:(a===l&&(n=(o-s)/f),o===l&&(n=2+(s-a)/f),s===l&&(n=4+(a-o)/f),(n*=60)<0&&(n+=360)),[n,c,u]}(this._rgb)},g.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hcg"])))},l.format.hcg=function(){for(var e,t,n,r,a,o,s=[],i=arguments.length;i--;)s[i]=arguments[i];var l,f,c,u=(s=H(s,"hcg"))[0],h=s[1],p=s[2];p*=255;var d=255*h;if(0===h)l=f=c=p;else{360===u&&(u=0),u>360&&(u-=360),u<0&&(u+=360);var g=$(u/=60),m=u-g,b=p*(1-h),v=b+d*(1-m),y=b+d*m,w=b+d;switch(g){case 0:l=(e=[w,y,b])[0],f=e[1],c=e[2];break;case 1:l=(t=[v,w,b])[0],f=t[1],c=t[2];break;case 2:l=(n=[b,w,y])[0],f=n[1],c=n[2];break;case 3:l=(r=[b,v,w])[0],f=r[1],c=r[2];break;case 4:l=(a=[y,b,w])[0],f=a[1],c=a[2];break;case 5:l=(o=[w,b,v])[0],f=o[1],c=o[2]}}return[l,f,c,s.length>3?s[3]:1]},l.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=U(e,"hcg"),"array"===Z(e)&&3===e.length)return"hcg"}});var W=i.unpack,Y=i.last,Q=Math.round,X=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=W(e,"rgba"),r=n[0],a=n[1],o=n[2],s=n[3],i=Y(e)||"auto";void 0===s&&(s=1),"auto"===i&&(i=s<1?"rgba":"rgb");var l="000000"+((r=Q(r))<<16|(a=Q(a))<<8|(o=Q(o))).toString(16);l=l.substr(l.length-6);var f="0"+Q(255*s).toString(16);switch(f=f.substr(f.length-2),i.toLowerCase()){case"rgba":return"#"+l+f;case"argb":return"#"+f+l;default:return"#"+l}},K=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ee=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,te=function(e){if(e.match(K)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(ee)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var n=parseInt(e,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+e)},ne=i.type;p.prototype.hex=function(e){return X(this._rgb,e)},g.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hex"])))},l.format.hex=te,l.autodetect.push({p:4,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===ne(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var re=i.unpack,ae=i.TWOPI,oe=Math.min,se=Math.sqrt,ie=Math.acos,le=i.unpack,fe=i.limit,ce=i.TWOPI,ue=i.PITHIRD,he=Math.cos,pe=i.unpack,de=i.type;p.prototype.hsi=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=re(e,"rgb"),a=r[0],o=r[1],s=r[2],i=oe(a/=255,o/=255,s/=255),l=(a+o+s)/3,f=l>0?1-i/l:0;return 0===f?n=NaN:(n=(a-o+(a-s))/2,n/=se((a-o)*(a-o)+(a-s)*(o-s)),n=ie(n),s>o&&(n=ae-n),n/=ae),[360*n,f,l]}(this._rgb)},g.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hsi"])))},l.format.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,a,o=(e=le(e,"hsi"))[0],s=e[1],i=e[2];return isNaN(o)&&(o=0),isNaN(s)&&(s=0),o>360&&(o-=360),o<0&&(o+=360),(o/=360)<1/3?r=1-((a=(1-s)/3)+(n=(1+s*he(ce*o)/he(ue-ce*o))/3)):o<2/3?a=1-((n=(1-s)/3)+(r=(1+s*he(ce*(o-=1/3))/he(ue-ce*o))/3)):n=1-((r=(1-s)/3)+(a=(1+s*he(ce*(o-=2/3))/he(ue-ce*o))/3)),[255*(n=fe(i*n*3)),255*(r=fe(i*r*3)),255*(a=fe(i*a*3)),e.length>3?e[3]:1]},l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=pe(e,"hsi"),"array"===de(e)&&3===e.length)return"hsi"}});var ge=i.unpack,me=i.type;p.prototype.hsl=function(){return x(this._rgb)},g.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hsl"])))},l.format.hsl=E,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ge(e,"hsl"),"array"===me(e)&&3===e.length)return"hsl"}});var be=i.unpack,ve=Math.min,ye=Math.max,we=i.unpack,_e=Math.floor,ke=i.unpack,Ce=i.type;p.prototype.hsv=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,a,o=(e=be(e,"rgb"))[0],s=e[1],i=e[2],l=ve(o,s,i),f=ye(o,s,i),c=f-l;return a=f/255,0===f?(n=Number.NaN,r=0):(r=c/f,o===f&&(n=(s-i)/c),s===f&&(n=2+(i-o)/c),i===f&&(n=4+(o-s)/c),(n*=60)<0&&(n+=360)),[n,r,a]}(this._rgb)},g.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hsv"])))},l.format.hsv=function(){for(var e,t,n,r,a,o,s=[],i=arguments.length;i--;)s[i]=arguments[i];var l,f,c,u=(s=we(s,"hsv"))[0],h=s[1],p=s[2];if(p*=255,0===h)l=f=c=p;else{360===u&&(u=0),u>360&&(u-=360),u<0&&(u+=360);var d=_e(u/=60),g=u-d,m=p*(1-h),b=p*(1-h*g),v=p*(1-h*(1-g));switch(d){case 0:l=(e=[p,v,m])[0],f=e[1],c=e[2];break;case 1:l=(t=[b,p,m])[0],f=t[1],c=t[2];break;case 2:l=(n=[m,p,v])[0],f=n[1],c=n[2];break;case 3:l=(r=[m,b,p])[0],f=r[1],c=r[2];break;case 4:l=(a=[v,m,p])[0],f=a[1],c=a[2];break;case 5:l=(o=[p,m,b])[0],f=o[1],c=o[2]}}return[l,f,c,s.length>3?s[3]:1]},l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ke(e,"hsv"),"array"===Ce(e)&&3===e.length)return"hsv"}});var Me=18,Pe=.95047,xe=1,Oe=1.08883,Te=.137931034,Ie=.206896552,Fe=.12841855,Ne=.008856452,Ee=i.unpack,je=Math.pow,Se=function(e){return(e/=255)<=.04045?e/12.92:je((e+.055)/1.055,2.4)},Ae=function(e){return e>Ne?je(e,1/3):e/Fe+Te},Le=function(e,t,n){return e=Se(e),t=Se(t),n=Se(n),[Ae((.4124564*e+.3575761*t+.1804375*n)/Pe),Ae((.2126729*e+.7151522*t+.072175*n)/xe),Ae((.0193339*e+.119192*t+.9503041*n)/Oe)]},Re=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Ee(e,"rgb"),r=n[0],a=n[1],o=n[2],s=Le(r,a,o),i=s[0],l=s[1],f=116*l-16;return[f<0?0:f,500*(i-l),200*(l-s[2])]},Ge=i.unpack,qe=Math.pow,Be=function(e){return 255*(e<=.00304?12.92*e:1.055*qe(e,1/2.4)-.055)},De=function(e){return e>Ie?e*e*e:Fe*(e-Te)},Ve=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,a,o=(e=Ge(e,"lab"))[0],s=e[1],i=e[2];return r=(o+16)/116,n=isNaN(s)?r:r+s/500,a=isNaN(i)?r:r-i/200,r=xe*De(r),n=Pe*De(n),a=Oe*De(a),[Be(3.2404542*n-1.5371385*r-.4985314*a),Be(-.969266*n+1.8760108*r+.041556*a),Be(.0556434*n-.2040259*r+1.0572252*a),e.length>3?e[3]:1]},ze=i.unpack,Je=i.type;p.prototype.lab=function(){return Re(this._rgb)},g.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["lab"])))},l.format.lab=Ve,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=ze(e,"lab"),"array"===Je(e)&&3===e.length)return"lab"}});var He=i.unpack,$e=i.RAD2DEG,Ue=Math.sqrt,Ze=Math.atan2,We=Math.round,Ye=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=He(e,"lab"),r=n[0],a=n[1],o=n[2],s=Ue(a*a+o*o),i=(Ze(o,a)*$e+360)%360;return 0===We(1e4*s)&&(i=Number.NaN),[r,s,i]},Qe=i.unpack,Xe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Qe(e,"rgb"),r=n[0],a=n[1],o=n[2],s=Re(r,a,o),i=s[0],l=s[1],f=s[2];return Ye(i,l,f)},Ke=i.unpack,et=i.DEG2RAD,tt=Math.sin,nt=Math.cos,rt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Ke(e,"lch"),r=n[0],a=n[1],o=n[2];return isNaN(o)&&(o=0),[r,nt(o*=et)*a,tt(o)*a]},at=i.unpack,ot=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=at(e,"lch"))[0],r=e[1],a=e[2],o=rt(n,r,a),s=o[0],i=o[1],l=o[2],f=Ve(s,i,l);return[f[0],f[1],f[2],e.length>3?e[3]:1]},st=i.unpack,it=i.unpack,lt=i.type;p.prototype.lch=function(){return Xe(this._rgb)},p.prototype.hcl=function(){return Xe(this._rgb).reverse()},g.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["lch"])))},g.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hcl"])))},l.format.lch=ot,l.format.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=st(e,"hcl").reverse();return ot.apply(void 0,n)},["lch","hcl"].forEach((function(e){return l.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=it(t,e),"array"===lt(t)&&3===t.length)return e}})}));var ft={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},ct=i.type;p.prototype.name=function(){for(var e=X(this._rgb,"rgb"),t=0,n=Object.keys(ft);t<n.length;t+=1){var r=n[t];if(ft[r]===e)return r.toLowerCase()}return e},l.format.named=function(e){if(e=e.toLowerCase(),ft[e])return te(ft[e]);throw new Error("unknown color name: "+e)},l.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===ct(e)&&ft[e.toLowerCase()])return"named"}});var ut=i.unpack,ht=i.type,pt=i.type;p.prototype.num=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ut(e,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]}(this._rgb)},g.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["num"])))},l.format.num=function(e){if("number"==ht(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)},l.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===pt(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var dt=i.unpack,gt=i.type,mt=Math.round;p.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(mt)},p.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map((function(t,n){return n<3?!1===e?t:mt(t):t}))},g.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["rgb"])))},l.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=dt(e,"rgba");return void 0===n[3]&&(n[3]=1),n},l.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=dt(e,"rgba"),"array"===gt(e)&&(3===e.length||4===e.length&&"number"==gt(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var bt=Math.log,vt=function(e){var t,n,r,a=e/100;return a<66?(t=255,n=-155.25485562709179-.44596950469579133*(n=a-2)+104.49216199393888*bt(n),r=a<20?0:.8274096064007395*(r=a-10)-254.76935184120902+115.67994401066147*bt(r)):(t=351.97690566805693+.114206453784165*(t=a-55)-40.25366309332127*bt(t),n=325.4494125711974+.07943456536662342*(n=a-50)-28.0852963507957*bt(n),r=255),[t,n,r,1]},yt=i.unpack,wt=Math.round;p.prototype.temp=p.prototype.kelvin=p.prototype.temperature=function(){return function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n,r=yt(e,"rgb"),a=r[0],o=r[2],s=1e3,i=4e4,l=.4;i-s>l;){var f=vt(n=.5*(i+s));f[2]/f[0]>=o/a?i=n:s=n}return wt(n)}(this._rgb)},g.temp=g.kelvin=g.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["temp"])))},l.format.temp=l.format.kelvin=l.format.temperature=vt;var _t=i.type;p.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===_t(e)?t?(this._rgb[3]=e,this):new p([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},p.prototype.clipped=function(){return this._rgb._clipped||!1},p.prototype.darken=function(e){void 0===e&&(e=1);var t=this.lab();return t[0]-=Me*e,new p(t,"lab").alpha(this.alpha(),!0)},p.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},p.prototype.darker=p.prototype.darken,p.prototype.brighter=p.prototype.brighten,p.prototype.get=function(e){var t=e.split("."),n=t[0],r=t[1],a=this[n]();if(r){var o=n.indexOf(r);if(o>-1)return a[o];throw new Error("unknown channel "+r+" in mode "+n)}return a};var kt=i.type,Ct=Math.pow;p.prototype.luminance=function(e){if(void 0!==e&&"number"===kt(e)){if(0===e)return new p([0,0,0,this._rgb[3]],"rgb");if(1===e)return new p([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),n=20,r=function(t,a){var o=t.interpolate(a,.5,"rgb"),s=o.luminance();return Math.abs(e-s)<1e-7||!n--?o:s>e?r(t,o):r(o,a)},a=(t>e?r(new p([0,0,0]),this):r(this,new p([255,255,255]))).rgb();return new p(a.concat([this._rgb[3]]))}return Mt.apply(void 0,this._rgb.slice(0,3))};var Mt=function(e,t,n){return.2126*(e=Pt(e))+.7152*(t=Pt(t))+.0722*Pt(n)},Pt=function(e){return(e/=255)<=.03928?e/12.92:Ct((e+.055)/1.055,2.4)},xt={},Ot=i.type,Tt=function(e,t,n){void 0===n&&(n=.5);for(var r=[],a=arguments.length-3;a-- >0;)r[a]=arguments[a+3];var o=r[0]||"lrgb";if(xt[o]||r.length||(o=Object.keys(xt)[0]),!xt[o])throw new Error("interpolation mode "+o+" is not defined");return"object"!==Ot(e)&&(e=new p(e)),"object"!==Ot(t)&&(t=new p(t)),xt[o](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};p.prototype.mix=p.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Tt.apply(void 0,[this,e,t].concat(n))},p.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new p([t[0]*n,t[1]*n,t[2]*n,n],"rgb")},p.prototype.saturate=function(e){void 0===e&&(e=1);var t=this.lch();return t[1]+=Me*e,t[1]<0&&(t[1]=0),new p(t,"lch").alpha(this.alpha(),!0)},p.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var It=i.type;p.prototype.set=function(e,t,n){void 0===n&&(n=!1);var r=e.split("."),a=r[0],o=r[1],s=this[a]();if(o){var i=a.indexOf(o);if(i>-1){if("string"==It(t))switch(t.charAt(0)){case"+":case"-":s[i]+=+t;break;case"*":s[i]*=+t.substr(1);break;case"/":s[i]/=+t.substr(1);break;default:s[i]=+t}else{if("number"!==It(t))throw new Error("unsupported value for Color.set");s[i]=t}var l=new p(s,a);return n?(this._rgb=l._rgb,this):l}throw new Error("unknown channel "+o+" in mode "+a)}return s};xt.rgb=function(e,t,n){var r=e._rgb,a=t._rgb;return new p(r[0]+n*(a[0]-r[0]),r[1]+n*(a[1]-r[1]),r[2]+n*(a[2]-r[2]),"rgb")};var Ft=Math.sqrt,Nt=Math.pow;xt.lrgb=function(e,t,n){var r=e._rgb,a=r[0],o=r[1],s=r[2],i=t._rgb,l=i[0],f=i[1],c=i[2];return new p(Ft(Nt(a,2)*(1-n)+Nt(l,2)*n),Ft(Nt(o,2)*(1-n)+Nt(f,2)*n),Ft(Nt(s,2)*(1-n)+Nt(c,2)*n),"rgb")};xt.lab=function(e,t,n){var r=e.lab(),a=t.lab();return new p(r[0]+n*(a[0]-r[0]),r[1]+n*(a[1]-r[1]),r[2]+n*(a[2]-r[2]),"lab")};var Et=function(e,t,n,r){var a,o,s,i,l,f,c,u,h,d,g,m;return"hsl"===r?(s=e.hsl(),i=t.hsl()):"hsv"===r?(s=e.hsv(),i=t.hsv()):"hcg"===r?(s=e.hcg(),i=t.hcg()):"hsi"===r?(s=e.hsi(),i=t.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",s=e.hcl(),i=t.hcl()),"h"===r.substr(0,1)&&(l=(a=s)[0],c=a[1],h=a[2],f=(o=i)[0],u=o[1],d=o[2]),isNaN(l)||isNaN(f)?isNaN(l)?isNaN(f)?m=Number.NaN:(m=f,1!=h&&0!=h||"hsv"==r||(g=u)):(m=l,1!=d&&0!=d||"hsv"==r||(g=c)):m=l+n*(f>l&&f-l>180?f-(l+360):f<l&&l-f>180?f+360-l:f-l),void 0===g&&(g=c+n*(u-c)),new p([m,g,h+n*(d-h)],r)},jt=function(e,t,n){return Et(e,t,n,"lch")};xt.lch=jt,xt.hcl=jt;xt.num=function(e,t,n){var r=e.num(),a=t.num();return new p(r+n*(a-r),"num")};xt.hcg=function(e,t,n){return Et(e,t,n,"hcg")};xt.hsi=function(e,t,n){return Et(e,t,n,"hsi")};xt.hsl=function(e,t,n){return Et(e,t,n,"hsl")};xt.hsv=function(e,t,n){return Et(e,t,n,"hsv")};var St=i.clip_rgb,At=Math.pow,Lt=Math.sqrt,Rt=Math.PI,Gt=Math.cos,qt=Math.sin,Bt=Math.atan2,Dt=function(e,t){for(var n=e.length,r=[0,0,0,0],a=0;a<e.length;a++){var o=e[a],s=t[a]/n,i=o._rgb;r[0]+=At(i[0],2)*s,r[1]+=At(i[1],2)*s,r[2]+=At(i[2],2)*s,r[3]+=i[3]*s}return r[0]=Lt(r[0]),r[1]=Lt(r[1]),r[2]=Lt(r[2]),r[3]>.9999999&&(r[3]=1),new p(St(r))},Vt=i.type,zt=Math.pow,Jt=function(e){var t="rgb",n=g("#ccc"),r=0,a=[0,1],o=[],s=[0,0],i=!1,l=[],f=!1,c=0,u=1,h=!1,p={},d=!0,m=1,b=function(e){if((e=e||["#fff","#000"])&&"string"===Vt(e)&&g.brewer&&g.brewer[e.toLowerCase()]&&(e=g.brewer[e.toLowerCase()]),"array"===Vt(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=g(e[t]);o.length=0;for(var n=0;n<e.length;n++)o.push(n/(e.length-1))}return _(),l=e},v=function(e){return e},y=function(e){return e},w=function(e,r){var a,f;if(null==r&&(r=!1),isNaN(e)||null===e)return n;f=r?e:i&&i.length>2?function(e){if(null!=i){for(var t=i.length-1,n=0;n<t&&e>=i[n];)n++;return n-1}return 0}(e)/(i.length-2):u!==c?(e-c)/(u-c):1,f=y(f),r||(f=v(f)),1!==m&&(f=zt(f,m)),f=s[0]+f*(1-s[0]-s[1]),f=Math.min(1,Math.max(0,f));var h=Math.floor(1e4*f);if(d&&p[h])a=p[h];else{if("array"===Vt(l))for(var b=0;b<o.length;b++){var w=o[b];if(f<=w){a=l[b];break}if(f>=w&&b===o.length-1){a=l[b];break}if(f>w&&f<o[b+1]){f=(f-w)/(o[b+1]-w),a=g.interpolate(l[b],l[b+1],f,t);break}}else"function"===Vt(l)&&(a=l(f));d&&(p[h]=a)}return a},_=function(){return p={}};b(e);var k=function(e){var t=g(w(e));return f&&t[f]?t[f]():t};return k.classes=function(e){if(null!=e){if("array"===Vt(e))i=e,a=[e[0],e[e.length-1]];else{var t=g.analyze(a);i=0===e?[t.min,t.max]:g.limits(t,"e",e)}return k}return i},k.domain=function(e){if(!arguments.length)return a;c=e[0],u=e[e.length-1],o=[];var t=l.length;if(e.length===t&&c!==u)for(var n=0,r=Array.from(e);n<r.length;n+=1){var s=r[n];o.push((s-c)/(u-c))}else{for(var i=0;i<t;i++)o.push(i/(t-1));if(e.length>2){var f=e.map((function(t,n){return n/(e.length-1)})),h=e.map((function(e){return(e-c)/(u-c)}));h.every((function(e,t){return f[t]===e}))||(y=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=h[t+1];)t++;var n=(e-h[t])/(h[t+1]-h[t]);return f[t]+n*(f[t+1]-f[t])})}}return a=[c,u],k},k.mode=function(e){return arguments.length?(t=e,_(),k):t},k.range=function(e,t){return b(e),k},k.out=function(e){return f=e,k},k.spread=function(e){return arguments.length?(r=e,k):r},k.correctLightness=function(e){return null==e&&(e=!0),h=e,_(),v=h?function(e){for(var t=w(0,!0).lab()[0],n=w(1,!0).lab()[0],r=t>n,a=w(e,!0).lab()[0],o=t+(n-t)*e,s=a-o,i=0,l=1,f=20;Math.abs(s)>.01&&f-- >0;)r&&(s*=-1),s<0?(i=e,e+=.5*(l-e)):(l=e,e+=.5*(i-e)),s=(a=w(e,!0).lab()[0])-o;return e}:function(e){return e},k},k.padding=function(e){return null!=e?("number"===Vt(e)&&(e=[e,e]),s=e,k):s},k.colors=function(t,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=l.slice(0);else if(1===t)r=[k(.5)];else if(t>1){var o=a[0],s=a[1]-o;r=Ht(0,t,!1).map((function(e){return k(o+e/(t-1)*s)}))}else{e=[];var f=[];if(i&&i.length>2)for(var c=1,u=i.length,h=1<=u;h?c<u:c>u;h?c++:c--)f.push(.5*(i[c-1]+i[c]));else f=a;r=f.map((function(e){return k(e)}))}return g[n]&&(r=r.map((function(e){return e[n]()}))),r},k.cache=function(e){return null!=e?(d=e,k):d},k.gamma=function(e){return null!=e?(m=e,k):m},k.nodata=function(e){return null!=e?(n=g(e),k):n},k};function Ht(e,t,n){for(var r=[],a=e<t,o=n?a?t+1:t-1:t,s=e;a?s<o:s>o;a?s++:s--)r.push(s);return r}var $t=function(e){var t,n,r,a,o,s,i;if(2===(e=e.map((function(e){return new p(e)}))).length)t=e.map((function(e){return e.lab()})),o=t[0],s=t[1],a=function(e){var t=[0,1,2].map((function(t){return o[t]+e*(s[t]-o[t])}));return new p(t,"lab")};else if(3===e.length)n=e.map((function(e){return e.lab()})),o=n[0],s=n[1],i=n[2],a=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*o[t]+2*(1-e)*e*s[t]+e*e*i[t]}));return new p(t,"lab")};else if(4===e.length){var l;r=e.map((function(e){return e.lab()})),o=r[0],s=r[1],i=r[2],l=r[3],a=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*s[t]+3*(1-e)*e*e*i[t]+e*e*e*l[t]}));return new p(t,"lab")}}else if(5===e.length){var f=$t(e.slice(0,3)),c=$t(e.slice(2,5));a=function(e){return e<.5?f(2*e):c(2*(e-.5))}}return a},Ut=function(e,t,n){if(!Ut[n])throw new Error("unknown blend mode "+n);return Ut[n](e,t)},Zt=function(e){return function(t,n){var r=g(n).rgb(),a=g(t).rgb();return g.rgb(e(r,a))}},Wt=function(e){return function(t,n){var r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r}};Ut.normal=Zt(Wt((function(e){return e}))),Ut.multiply=Zt(Wt((function(e,t){return e*t/255}))),Ut.screen=Zt(Wt((function(e,t){return 255*(1-(1-e/255)*(1-t/255))}))),Ut.overlay=Zt(Wt((function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))}))),Ut.darken=Zt(Wt((function(e,t){return e>t?t:e}))),Ut.lighten=Zt(Wt((function(e,t){return e>t?e:t}))),Ut.dodge=Zt(Wt((function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e}))),Ut.burn=Zt(Wt((function(e,t){return 255*(1-(1-t/255)/(e/255))})));for(var Yt=Ut,Qt=i.type,Xt=i.clip_rgb,Kt=i.TWOPI,en=Math.pow,tn=Math.sin,nn=Math.cos,rn=Math.floor,an=Math.random,on=Math.log,sn=Math.pow,ln=Math.floor,fn=Math.abs,cn=function(e,t){void 0===t&&(t=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===o(e)&&(e=Object.values(e)),e.forEach((function(e){t&&"object"===o(e)&&(e=e[t]),null==e||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(e,t){return un(n,e,t)},n},un=function(e,t,n){void 0===t&&(t="equal"),void 0===n&&(n=7),"array"==o(e)&&(e=cn(e));var r=e.min,a=e.max,s=e.values.sort((function(e,t){return e-t}));if(1===n)return[r,a];var i=[];if("c"===t.substr(0,1)&&(i.push(r),i.push(a)),"e"===t.substr(0,1)){i.push(r);for(var l=1;l<n;l++)i.push(r+l/n*(a-r));i.push(a)}else if("l"===t.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var f=Math.LOG10E*on(r),c=Math.LOG10E*on(a);i.push(r);for(var u=1;u<n;u++)i.push(sn(10,f+u/n*(c-f)));i.push(a)}else if("q"===t.substr(0,1)){i.push(r);for(var h=1;h<n;h++){var p=(s.length-1)*h/n,d=ln(p);if(d===p)i.push(s[d]);else{var g=p-d;i.push(s[d]*(1-g)+s[d+1]*g)}}i.push(a)}else if("k"===t.substr(0,1)){var m,b=s.length,v=new Array(b),y=new Array(n),w=!0,_=0,k=null;(k=[]).push(r);for(var C=1;C<n;C++)k.push(r+C/n*(a-r));for(k.push(a);w;){for(var M=0;M<n;M++)y[M]=0;for(var P=0;P<b;P++)for(var x=s[P],O=Number.MAX_VALUE,T=void 0,I=0;I<n;I++){var F=fn(k[I]-x);F<O&&(O=F,T=I),y[T]++,v[P]=T}for(var N=new Array(n),E=0;E<n;E++)N[E]=null;for(var j=0;j<b;j++)null===N[m=v[j]]?N[m]=s[j]:N[m]+=s[j];for(var S=0;S<n;S++)N[S]*=1/y[S];w=!1;for(var A=0;A<n;A++)if(N[A]!==k[A]){w=!0;break}k=N,++_>200&&(w=!1)}for(var L={},R=0;R<n;R++)L[R]=[];for(var G=0;G<b;G++)L[m=v[G]].push(s[G]);for(var q=[],B=0;B<n;B++)q.push(L[B][0]),q.push(L[B][L[B].length-1]);q=q.sort((function(e,t){return e-t})),i.push(q[0]);for(var D=1;D<q.length;D+=2){var V=q[D];isNaN(V)||-1!==i.indexOf(V)||i.push(V)}}return i},hn={analyze:cn,limits:un},pn=Math.sqrt,dn=Math.atan2,gn=Math.abs,mn=Math.cos,bn=Math.PI,vn={cool:function(){return Jt([g.hsl(180,1,.9),g.hsl(250,.7,.4)])},hot:function(){return Jt(["#000","#f00","#ff0","#fff"]).mode("rgb")}},yn={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},wn=0,_n=Object.keys(yn);wn<_n.length;wn+=1){var kn=_n[wn];yn[kn.toLowerCase()]=yn[kn]}var Cn=yn;return g.average=function(e,t,n){void 0===t&&(t="lrgb"),void 0===n&&(n=null);var r=e.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var a=r/n.reduce((function(e,t){return e+t}));if(n.forEach((function(e,t){n[t]*=a})),e=e.map((function(e){return new p(e)})),"lrgb"===t)return Dt(e,n);for(var o=e.shift(),s=o.get(t),i=[],l=0,f=0,c=0;c<s.length;c++)if(s[c]=(s[c]||0)*n[0],i.push(isNaN(s[c])?0:n[0]),"h"===t.charAt(c)&&!isNaN(s[c])){var u=s[c]/180*Rt;l+=Gt(u)*n[0],f+=qt(u)*n[0]}var h=o.alpha()*n[0];e.forEach((function(e,r){var a=e.get(t);h+=e.alpha()*n[r+1];for(var o=0;o<s.length;o++)if(!isNaN(a[o]))if(i[o]+=n[r+1],"h"===t.charAt(o)){var c=a[o]/180*Rt;l+=Gt(c)*n[r+1],f+=qt(c)*n[r+1]}else s[o]+=a[o]*n[r+1]}));for(var d=0;d<s.length;d++)if("h"===t.charAt(d)){for(var g=Bt(f/i[d],l/i[d])/Rt*180;g<0;)g+=360;for(;g>=360;)g-=360;s[d]=g}else s[d]=s[d]/i[d];return h/=r,new p(s,t).alpha(h>.99999?1:h,!0)},g.bezier=function(e){var t=$t(e);return t.scale=function(){return Jt(t)},t},g.blend=Yt,g.cubehelix=function(e,t,n,r,a){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=[0,1]);var o,s=0;"array"===Qt(a)?o=a[1]-a[0]:(o=0,a=[a,a]);var i=function(i){var l=Kt*((e+120)/360+t*i),f=en(a[0]+o*i,r),c=(0!==s?n[0]+i*s:n)*f*(1-f)/2,u=nn(l),h=tn(l);return g(Xt([255*(f+c*(-.14861*u+1.78277*h)),255*(f+c*(-.29227*u-.90649*h)),255*(f+c*(1.97294*u)),1]))};return i.start=function(t){return null==t?e:(e=t,i)},i.rotations=function(e){return null==e?t:(t=e,i)},i.gamma=function(e){return null==e?r:(r=e,i)},i.hue=function(e){return null==e?n:("array"===Qt(n=e)?0==(s=n[1]-n[0])&&(n=n[1]):s=0,i)},i.lightness=function(e){return null==e?a:("array"===Qt(e)?(a=e,o=e[1]-e[0]):(a=[e,e],o=0),i)},i.scale=function(){return g.scale(i)},i.hue(n),i},g.mix=g.interpolate=Tt,g.random=function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef".charAt(rn(16*an()));return new p(e,"hex")},g.scale=Jt,g.analyze=hn.analyze,g.contrast=function(e,t){e=new p(e),t=new p(t);var n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},g.deltaE=function(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=1),e=new p(e),t=new p(t);for(var a=Array.from(e.lab()),o=a[0],s=a[1],i=a[2],l=Array.from(t.lab()),f=l[0],c=l[1],u=l[2],h=pn(s*s+i*i),d=pn(c*c+u*u),g=o<16?.511:.040975*o/(1+.01765*o),m=.0638*h/(1+.0131*h)+.638,b=h<1e-6?0:180*dn(i,s)/bn;b<0;)b+=360;for(;b>=360;)b-=360;var v=b>=164&&b<=345?.56+gn(.2*mn(bn*(b+168)/180)):.36+gn(.4*mn(bn*(b+35)/180)),y=h*h*h*h,w=pn(y/(y+1900)),_=m*(w*v+1-w),k=h-d,C=s-c,M=i-u,P=(o-f)/(n*g),x=k/(r*m);return pn(P*P+x*x+(C*C+M*M-k*k)/(_*_))},g.distance=function(e,t,n){void 0===n&&(n="lab"),e=new p(e),t=new p(t);var r=e.get(n),a=t.get(n),o=0;for(var s in r){var i=(r[s]||0)-(a[s]||0);o+=i*i}return Math.sqrt(o)},g.limits=hn.limits,g.valid=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(p,[null].concat(e))),!0}catch(e){return!1}},g.scales=vn,g.colors=ft,g.brewer=Cn,g}()},347:e=>{var n;e.exports=(n=function(e){return"number"==typeof e&&parseFloat(e)==parseInt(e,10)&&!isNaN(e)},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=this.length>>>0;for(t=+t||0,1/0===Math.abs(t)&&(t=0),0>t&&0>(t+=n)&&(t=0);t<n;t++)if(this[t]===e)return t;return-1}),function(e){this.objectID="",this.legendSeparator=this.separator=" - ",this.method="",this.precision=0,this.precisionflag="auto",this.roundlength=2,this.silent=this.debug=this.is_uniqueValues=!1,this.bounds=[],this.ranges=[],this.inner_ranges=null,this.colors=[],this.counter=[],this.stat_cov=this.stat_stddev=this.stat_variance=this.stat_pop=this.stat_min=this.stat_max=this.stat_sum=this.stat_median=this.stat_mean=this.stat_sorted=null,this.log=function(e,t){1!=this.debug&&null==t||console.log(this.objectID+"(object id) :: "+e)},this.setBounds=function(e){this.log("Setting bounds ("+e.length+") : "+e.join()),this.bounds=e},this.setSerie=function(e){this.log("Setting serie ("+e.length+") : "+e.join()),this.serie=e,this.resetStatistics(),this.setPrecision()},this.setColors=function(e){this.log("Setting color ramp ("+e.length+") : "+e.join()),this.colors=e},this.doCount=function(){if(!this._nodata()){var e=this.sorted();if(this.counter=[],1==this.is_uniqueValues)for(var t=0;t<this.bounds.length;t++)this.counter[t]=0;else for(t=0;t<this.bounds.length-1;t++)this.counter[t]=0;for(t=0;t<e.length;t++){var n=this.getClass(e[t]);this.counter[n]++}}},this.setPrecision=function(e){if(void 0!==e&&(this.precisionflag="manual",this.precision=e),"auto"==this.precisionflag)for(e=0;e<this.serie.length;e++){var t=isNaN(this.serie[e]+"")||-1==(this.serie[e]+"").toString().indexOf(".")?0:(this.serie[e]+"").split(".")[1].length;t>this.precision&&(this.precision=t)}20<this.precision&&(this.log("this.precision value ("+this.precision+') is greater than max value. Automatic set-up to 20 to prevent "Uncaught RangeError: toFixed()" when calling decimalFormat() method.'),this.precision=20),this.log("Calling setPrecision(). Mode : "+this.precisionflag+" - Decimals : "+this.precision),this.serie=this.decimalFormat(this.serie)},this.decimalFormat=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r=!isNaN(parseFloat(r))&&isFinite(r),t[n]=r?parseFloat(parseFloat(e[n]).toFixed(this.precision)):e[n]}return t},this.setRanges=function(){this.ranges=[];for(var e=0;e<this.bounds.length-1;e++)this.ranges[e]=this.bounds[e]+this.separator+this.bounds[e+1]},this.min=function(){if(!this._nodata()){this.stat_min=this.serie[0];for(var e=0;e<this.pop();e++)this.serie[e]<this.stat_min&&(this.stat_min=this.serie[e]);return this.stat_min}},this.max=function(){if(!this._nodata()){this.stat_max=this.serie[0];for(var e=0;e<this.pop();e++)this.serie[e]>this.stat_max&&(this.stat_max=this.serie[e]);return this.stat_max}},this.sum=function(){if(!this._nodata()){if(null==this.stat_sum)for(var e=this.stat_sum=0;e<this.pop();e++)this.stat_sum+=parseFloat(this.serie[e]);return this.stat_sum}},this.pop=function(){if(!this._nodata())return null==this.stat_pop&&(this.stat_pop=this.serie.length),this.stat_pop},this.mean=function(){if(!this._nodata())return null==this.stat_mean&&(this.stat_mean=parseFloat(this.sum()/this.pop())),this.stat_mean},this.median=function(){if(!this._nodata()){if(null==this.stat_median){this.stat_median=0;var e=this.sorted();this.stat_median=e.length%2?parseFloat(e[Math.ceil(e.length/2)-1]):(parseFloat(e[e.length/2-1])+parseFloat(e[e.length/2]))/2}return this.stat_median}},this.variance=function(){var e=void 0===e;if(!this._nodata()){if(null==this.stat_variance){for(var t=0,n=this.mean(),r=0;r<this.pop();r++)t+=Math.pow(this.serie[r]-n,2);this.stat_variance=t/this.pop(),1==e&&(this.stat_variance=Math.round(this.stat_variance*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))}return this.stat_variance}},this.stddev=function(e){if(e=void 0===e,!this._nodata())return null==this.stat_stddev&&(this.stat_stddev=Math.sqrt(this.variance()),1==e&&(this.stat_stddev=Math.round(this.stat_stddev*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))),this.stat_stddev},this.cov=function(e){if(e=void 0===e,!this._nodata())return null==this.stat_cov&&(this.stat_cov=this.stddev()/this.mean(),1==e&&(this.stat_cov=Math.round(this.stat_cov*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))),this.stat_cov},this.resetStatistics=function(){this.stat_cov=this.stat_stddev=this.stat_variance=this.stat_pop=this.stat_min=this.stat_max=this.stat_sum=this.stat_median=this.stat_mean=this.stat_sorted=null},this._nodata=function(){if(0==this.serie.length){if(!this.silent)throw new TypeError("Error. You should first enter a serie!");return this.log("[silent mode] Error. You should first enter a serie!",!0),1}return 0},this._nbClassInt=function(e){if(e=parseInt(e,10),!isNaN(e))return e;if(!this.silent)throw new TypeError("'"+e+"' is not a valid integer. Enable to set class number.");this.log("[silent mode] '"+e+"' is not a valid integer. Enable to set class number.",!0)},this._hasNegativeValue=function(){for(var e=0;e<this.serie.length;e++)if(0>this.serie[e])return!0;return!1},this._hasZeroValue=function(){for(var e=0;e<this.serie.length;e++)if(0===parseFloat(this.serie[e]))return!0;return!1},this.sorted=function(){return null==this.stat_sorted&&(this.stat_sorted=0==this.is_uniqueValues?this.serie.sort((function(e,t){return e-t})):this.serie.sort((function(e,t){var n=e.toString().toLowerCase(),r=t.toString().toLowerCase();return n<r?-1:n>r?1:0}))),this.stat_sorted},this.info=function(){if(!this._nodata()){var e="Population : "+this.pop()+" - [Min : "+this.min()+" | Max : "+this.max()+"]\n";return(e+="Mean : "+this.mean()+" - Median : "+this.median()+"\n")+"Variance : "+this.variance()+" - Standard deviation : "+this.stddev()+" - Coefficient of variation : "+this.cov()+"\n"}},this.setClassManually=function(e){if(!this._nodata()){if(e[0]===this.min()&&e[e.length-1]===this.max())return this.setBounds(e),this.setRanges(),this.method="manual classification ("+(e.length-1)+" classes)",this.bounds;if(!this.silent)throw new TypeError("Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max());this.log("[silent mode] "+t("Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max()),!0)}},this.getClassEqInterval=function(e,t,n){if(e=this._nbClassInt(e),!this._nodata()){var r=void 0===t?this.min():t;t=[];var a=r;r=((n=void 0===n?this.max():n)-r)/e;for(var o=0;o<=e;o++)t[o]=a,a+=r;return t[e]=n,this.setBounds(t),this.setRanges(),this.method="eq. intervals ("+e+" classes)",this.bounds}},this.getQuantiles=function(e){e=this._nbClassInt(e);for(var t=this.sorted(),n=[],r=this.pop()/e,a=1;a<e;a++)n.push(t[Math.round(a*r+.49)-1]);return n},this.getClassQuantile=function(e){if(e=this._nbClassInt(e),!this._nodata()){var t=this.sorted(),n=this.getQuantiles(e);return n.unshift(t[0]),n[t.length-1]!==t[t.length-1]&&n.push(t[t.length-1]),this.setBounds(n),this.setRanges(),this.method="quantile ("+e+" classes)",this.bounds}},this.getClassStdDeviation=function(e,t){if(e=this._nbClassInt(e),!this._nodata()){var n=this.max(),r=this.min(),a=this.stddev(),o=this.mean(),s=[];if(1==e%2){var i=Math.floor(e/2),l=i+1;for(s[i]=o-a/2,s[l]=o+a/2,o=i-1;0<o;o--)i=s[o+1]-a,s[o]=i;o=l+1}else{for(s[l=e/2]=o,o=l-1;0<o;o--)i=s[o+1]-a,s[o]=i;o=l+1}for(;o<e;o++)i=s[o-1]+a,s[o]=i;return s[0]=void 0===t?s[1]-a:r,s[e]=void 0===t?s[e-1]+a:n,this.setBounds(s),this.setRanges(),this.method="std deviation ("+e+" classes)",this.bounds}},this.getClassGeometricProgression=function(e){if(e=this._nbClassInt(e),!this._nodata()){if(!this._hasNegativeValue()&&!this._hasZeroValue()){var t=[],n=this.min(),r=this.max();n=Math.log(n)/Math.LN10,r=(Math.log(r)/Math.LN10-n)/e;for(var a=0;a<e;a++)t[a]=0==a?n:t[a-1]+r;return(t=t.map((function(e){return Math.pow(10,e)}))).push(this.max()),this.setBounds(t),this.setRanges(),this.method="geometric progression ("+e+" classes)",this.bounds}if(!this.silent)throw new TypeError("geometric progression can't be applied with a serie containing negative or zero values.");this.log("[silent mode] geometric progression can't be applied with a serie containing negative or zero values.",!0)}},this.getClassArithmeticProgression=function(e){if(e=this._nbClassInt(e),!this._nodata()){for(var t=0,n=1;n<=e;n++)t+=n;var r=[],a=this.min();for(t=(this.max()-a)/t,n=0;n<=e;n++)r[n]=0==n?a:r[n-1]+n*t;return this.setBounds(r),this.setRanges(),this.method="arithmetic progression ("+e+" classes)",this.bounds}},this.getClassJenks2=function(e){if(e=this._nbClassInt(e),!this._nodata()){for(var t=this.sorted(),n=[],r=0,a=t.length+1;r<a;r++){for(var o=[],s=0,i=e+1;s<i;s++)o.push(0);n.push(o)}for(r=[],a=0,o=t.length+1;a<o;a++){s=[],i=0;for(var l=e+1;i<l;i++)s.push(0);r.push(s)}for(a=1,o=e+1;a<o;a++){n[0][a]=1,r[0][a]=0;var f=1;for(s=t.length+1;f<s;f++)r[f][a]=1/0;f=0}for(a=2,o=t.length+1;a<o;a++){l=i=s=0;for(var c=1,u=a+1;c<u;c++){var h=a-c+1;f=(i+=(f=parseFloat(t[h-1]))*f)-(s+=f)*s/(l+=1);var p=h-1;if(0!=p)for(var d=2,g=e+1;d<g;d++)r[a][d]>=f+r[p][d-1]&&(n[a][d]=h,r[a][d]=f+r[p][d-1])}n[a][1]=1,r[a][1]=f}for(f=t.length,r=[],a=0;a<=e;a++)r.push(0);for(r[e]=parseFloat(t[t.length-1]),r[0]=parseFloat(t[0]),a=e;2<=a;)o=parseInt(n[f][a]-2),r[a-1]=t[o],f=parseInt(n[f][a]-1),--a;return r[0]==r[1]&&(r[0]=0),this.setBounds(r),this.setRanges(),this.method="Jenks2 ("+e+" classes)",this.bounds}},this.getClassJenks=function(e){if(e=this._nbClassInt(e),!this._nodata()){var t=this.sorted();jenksMatrices=function(e,t){var n,r,a=[],o=[],s=0;for(n=0;n<e.length+1;n++){var i=[],l=[];for(r=0;r<t+1;r++)i.push(0),l.push(0);a.push(i),o.push(l)}for(n=1;n<t+1;n++)for(a[1][n]=1,o[1][n]=0,r=2;r<e.length+1;r++)o[r][n]=1/0;for(n=2;n<e.length+1;n++){for(var f,c=l=i=0,u=1;u<n+1;u++){var h=n-u+1;if(s=(l+=(r=e[h-1])*r)-(i+=r)*i/++c,0!=(f=h-1))for(r=2;r<t+1;r++)o[n][r]>=s+o[f][r-1]&&(a[n][r]=h,o[n][r]=s+o[f][r-1])}a[n][1]=1,o[n][1]=s}return{lower_class_limits:a,variance_combinations:o}};var n=jenksMatrices(t,e).lower_class_limits,r=t.length-1,a=[],o=e;for(a[e]=t[t.length-1],a[0]=t[0];1<o;)a[o-1]=t[n[r][o]-2],r=n[r][o]-1,o--;return this.setBounds(a),this.setRanges(),this.method="Jenks ("+e+" classes)",this.bounds}},this.getClassUniqueValues=function(){if(!this._nodata()){this.is_uniqueValues=!0;for(var e=this.sorted(),t=[],n=0;n<this.pop();n++)-1===t.indexOf(e[n])&&t.push(e[n]);return this.bounds=t,this.method="unique values",t}},this.getClass=function(e){for(var t=0;t<this.bounds.length;t++)if(1==this.is_uniqueValues){if(e==this.bounds[t])return t}else if(parseFloat(e)<=this.bounds[t+1])return t;return"Unable to get value's class."},this.getRanges=function(){return this.ranges},this.getRangeNum=function(e){var t;for(t=0;t<this.ranges.length;t++){var n=this.ranges[t].split(/ - /);if(e<=parseFloat(n[1]))return t}},this.getInnerRanges=function(){if(null!=this.inner_ranges)return this.inner_ranges;for(var e=[],t=this.sorted(),n=1,r=0;r<t.length;r++){if(0==r)var a=t[r];if(parseFloat(t[r])>parseFloat(this.bounds[n])&&(e[n-1]=""+a+this.separator+t[r-1],a=t[r],n++),n==this.bounds.length-1)return e[n-1]=""+a+this.separator+t[t.length-1],this.inner_ranges=e}},this.getSortedlist=function(){return this.sorted().join(", ")},this.getHtmlLegend=function(e,t,r,a,o,s){var i="",l=[];if(this.doCount(),ccolors=null!=e?e:this.colors,lg=null!=t?t:"Legend",getcounter=null!=r,fn=null!=a?a:function(e){return e},null==o&&(o="default"),"discontinuous"!=o||(this.getInnerRanges(),-1===this.counter.indexOf(0))){if("DESC"!==s&&(s="ASC"),!(ccolors.length<this.ranges.length)){if(0==this.is_uniqueValues)for(e=0;e<this.ranges.length;e++)!0===getcounter&&(i=' <span class="geostats-legend-counter">('+this.counter[e]+")</span>"),r=this.ranges[e].split(this.separator),t=parseFloat(r[0]).toFixed(this.precision),r=parseFloat(r[1]).toFixed(this.precision),"distinct"==o&&0!=e&&(n(t)?(t=parseInt(t)+1,"manual"==this.precisionflag&&0!=this.precision&&(t=parseFloat(t).toFixed(this.precision))):(t=parseFloat(t)+1/Math.pow(10,this.precision),t=parseFloat(t).toFixed(this.precision))),"discontinuous"==o&&(r=this.inner_ranges[e].split(this.separator),t=parseFloat(r[0]).toFixed(this.precision),r=parseFloat(r[1]).toFixed(this.precision)),t=fn(t)+this.legendSeparator+fn(r),t='<div><div class="geostats-legend-block" style="background-color:'+ccolors[e]+'"></div> '+t+i+"</div>",l.push(t);else for(e=0;e<this.bounds.length;e++)!0===getcounter&&(i=' <span class="geostats-legend-counter">('+this.counter[e]+")</span>"),t=fn(this.bounds[e]),t='<div><div class="geostats-legend-block" style="background-color:'+ccolors[e]+'"></div> '+t+i+"</div>",l.push(t);for("DESC"===s&&l.reverse(),o='<div class="geostats-legend"><div class="geostats-legend-title">'+lg+"</div>",e=0;e<l.length;e++)o+=l[e];return o+"</div>"}if(!this.silent)throw new TypeError("The number of colors should fit the number of ranges. Exit!");this.log("[silent mode] The number of colors should fit the number of ranges. Exit!",!0)}else{if(!this.silent)throw new TypeError("Geostats cannot apply 'discontinuous' mode to the getHtmlLegend() method because some classes are not populated.\nPlease switch to 'default' or 'distinct' modes. Exit!");this.log("[silent mode] Geostats cannot apply 'discontinuous' mode to the getHtmlLegend() method because some classes are not populated.\nPlease switch to 'default' or 'distinct' modes. Exit!",!0)}},this.objectID=(new Date).getUTCMilliseconds(),this.log("Creating new geostats object"),void 0!==e&&0<e.length?(this.serie=e,this.setPrecision(),this.log("Setting serie ("+e.length+") : "+e.join())):this.serie=[],this.getJenks=this.getClassJenks,this.getJenks2=this.getClassJenks2,this.getGeometricProgression=this.getClassGeometricProgression,this.getEqInterval=this.getClassEqInterval,this.getQuantile=this.getClassQuantile,this.getStdDeviation=this.getClassStdDeviation,this.getUniqueValues=this.getClassUniqueValues,this.getArithmeticProgression=this.getClassArithmeticProgression})}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={exports:{}};return e[t].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t){let n;!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};let n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),n=new CustomEvent(e,{detail:t}),document.dispatchEvent(n)}function t(e){let t;return t="function"==typeof e[e.length-1]?e[e.length-1]:function(e){return e},t}function n(e){let n=t(arguments),r=!1;return e&&e.meta&&e.meta.type&&e.meta.type.indexOf("scape.sociJson")>-1&&(r=!0),n(r),r}function a(e){let n,a=t(arguments);return window?n=window[e]:r.g&&(n=r.g[e]),a(n),n}function o(){return new function(){let t,n=(new Date).getTime().toString()+Math.random().toString().split(".")[1],r=[],a=!0,o=this;return document.addEventListener("socioscapes.dispatched."+n,(function(e){a=!0,o.dispatch()})),Object.defineProperty(this,"dispatch",{value:function(s){if(s){for(s.myArguments.unshift(s.myContext);s.myFunction.length>s.myArguments.length;)s.myArguments.push(null);s.myArguments.push((function(t){s.myCallback(t),e("socioscapes.dispatched."+n,t)})),r.push({myArguments:s.myArguments,myFunction:s.myFunction})}return a&&r.length>0&&(a=!1,t=r.shift(),t.myFunction.apply(o,t.myArguments)),this}}),Object.defineProperty(this,"id",{value:function(){return n}}),this}}function s(e,n,o){let s,i=t(arguments);return a(e)?o&&(window?(window[e]=n,s=window[e]):r.g&&(r.g[e]=n,s=r.g[e])):(window||r.g)&&(window[e]=n,s=window[e]),i(s),s}function i(e){let n=t(arguments),r=!1,a=["help","abstract","arguments","Array","boolean","break","byte","case","catch","char","class","const","continue","debugger","Date","default","delete","do","double","else","enum","eval","export","extends","false","final","finally","float","for","function","goto","hasOwnProperty","if","implements","import","in","instanceof","int","interface","isFinite","isNaN","isPrototypeOf","Infinity","length","let","long","native","Math","name","new","NaN","Number","null","Object","package","private","protected","prototype","public","return","short","static","super","switch","synchronized","String","this","throw","throws","toString","transient","true","try","typeof","undefined","valueOf","var","void","volatile","while","with","yield"];return e&&"string"==typeof e&&(/^[-A-Z0-9]+$/i.test(e)?-1===a.indexOf(e)?r=!0:console.log('Sorry, "'+e+'" is not a valid name because it is a reserved word. The full list of reserved words is: '+a):console.log("Sorry, that is not a valid name. Valid names can only contain letters (a to Z), numbers (0-9), or dashes (-).")),n(r),r}function l(e,n,r){Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};let a=t(arguments),o=!1;if(r)if(Number.isInteger(e))o=!!r[e]&&r[e];else if(i(e))for(let t=0;t<r.length;t++)e===r[t].meta[n]&&(o=r[t]);return a(o),o}function f(e){let r,o=t(arguments);return"string"==typeof e?a(e)&&n(a(e))&&(r=a(e)):n(e)&&(r=e),o(r),r}function c(e){let n=t(arguments);gapi.auth.authorize(e.auth,(function(t){t&&t.access_token&&gapi.client.load(e.client.name,e.client.version,(function(e){return n(e),e}))}))}var u=r(347),h=r.n(u);function p(e,n){n=n||{};let r,a,o,s,i=t(arguments),l=n.clientId||!1,f=n.immediate||!1,u=n.scope||!1,p=n.auth||!1,d=[],g=n&&n.featureIdProperty?n.featureIdProperty.toLowerCase():"dauid",m=1,b=0,v=n&&n.normalizationIdProperty?n.normalizationIdProperty.toLowerCase():"none",y=n.id||!1,w=n.projectId||!1,_=n.queryString||!1,k=n&&n.valueIdProperty?n.valueIdProperty.toLowerCase():"total",C={auth:{client_id:l,scope:u||["https://www.googleapis.com/auth/bigquery"],immediate:f||!0},client:{name:"bigquery",version:"v2"},query:{projectId:w,timeoutMs:"30000",query:_}};return p?(gapi.auth.setToken({access_token:p.access_token}),gapi.client.load(C.client.name,C.client.version,(function(){a(p)}))):c(C,(function(){a()})),a=function(){o=gapi.client.bigquery.jobs.query(C.query),o.execute((function(e){s={meta:{bqQueryString:_,bqTableId:y,columns:[],errors:[],featureIdProperty:g,normalizationIdProperty:v,valueIdProperty:k,source:"Google BigQuery, "+C.client.version,totalRows:parseInt(e.totalRows)},byColumn:{},byId:{},csv:[],geoJson:{type:"FeatureCollection",features:[]},raw:e};for(let t=0;t<e.schema.fields.length;t++)s.meta.columns.push(e.schema.fields[t].name.toLowerCase()),s.byColumn[e.schema.fields[t].name.toLowerCase()]=[],m=e.schema.fields[t].name.toLowerCase()===g?t:m,b=e.schema.fields[t].name.toLowerCase()===k?t:b;e.rows.forEach((function(t){for(let n=0,r={};n<t.f.length;n++)n===b&&(t.f[n].v=parseFloat(t.f[n].v)),isNaN(t.f[n].v)&&(s.meta.errors.push(t.f),t.f[n].v=0),r[e.schema.fields[n].name]=t.f[n].v,s.byColumn[e.schema.fields[n].name].push(t.f[n].v);r=[];for(let e in parsedRow)parsedRow.hasOwnProperty(e)&&r.push(parsedRow[e]);d.push(r.join(",")),s.geoJson.features.push({type:"Feature",properties:parsedRow}),s.byId[parsedRow[g]]=parsedRow})),s.csv=s.meta.columns.join(",")+"\n"+d.join("\n");try{s.geostats=new(h())(s.byColumn[k])}catch{s.geostats=null,console.log("geostats initialization failed.")}i(s)}))},e}function d(e,n){let r,a=t(arguments),o=new XMLHttpRequest;return o.overrideMimeType("application/json"),o.open("GET",n,!0),o.onreadystatechange=function(){4===o.readyState&&200===o.status&&(r={},r.geoJson=JSON.parse(o.responseText),r.meta={},r.meta.crs=r.geoJson.crs.properties.name,r.meta.totalFeatures=parseInt(r.geoJson.totalFeatures),r.meta.type="geoJson",r.meta.source="Web Feature Service",r.meta.wfsQueryString=n,a(r))},o.send(null),e}function g(e,t){return l(t="string"==typeof t?t:e.schema.name,"name",e.object)}function m(n,r,a){let o=t(arguments),s="function"==typeof r&&r;return s?s(n.that,a,(function(t){console.log('The results of your "'+s.name+'" are ready.'),e("socioscapes.ready."+s.name,n),o(t)})):(console.log('Sorry, "'+r+'" is not a valid function.'),o(!1)),n.that}function b(e,n,r){let a=t(arguments);return a(e.that),e.that}function v(n,r,a){let o=t(arguments),s="function"==typeof r&&r;return s?s(n.that,a,(function(t){if(t)for(let e in t)t.hasOwnProperty(e)&&(delete n.object[e],n.object[e]=t[e]);console.log('The results of your "'+s.name+'" query are ready.'),e("socioscapes.ready."+s.name,n),o(t)})):(console.log('Sorry, "'+r+'" is not a valid function.'),o(!1)),n.that}const y={scape:{children:[{class:"[state]"}],class:"scape",menu:g,name:"scape0",state:[{class:"state",children:[{class:"[layer]"},{class:"[view]"}],layer:[{children:[{class:"data"},{class:"geom"}],class:"layer",data:{menu:v,value:{}},geom:{menu:v,value:{}},menu:g,name:"layer0",parent:"state",type:"layer.state.scape.sociJson"}],menu:g,name:"state0",parent:"scape",type:"state.scape.sociJson",view:[{config:{menu:m,value:{breaks:5,classification:"jenks",classes:[],colourScale:"YlOrRd",featureIdProperty:"dauid",layer:0,type:"",valueIdProperty:"total",version:"0.1"}},children:[{class:"config"},{class:"require"}],class:"view",menu:g,name:"view0",parent:"state",require:{menu:b,value:{layers:{},modules:{}}},type:"view.state.scape.sociJson"}]}],type:"scape.sociJson"}},w={structure:y,alias:{bq:p,wfs:d},index:{scape:{class:"scape",type:"scape.sociJson",schema:y.scape},state:{class:"state",type:"state.scape.sociJson",schema:y.scape.state[0]},layer:{class:"layer",type:"layer.state.scape.sociJson",schema:y.scape.state[0].layer[0]},view:{class:"view",type:"view.state.scape.sociJson",schema:y.scape.state[0].view[0]}}};function _(e){let n,r=t(arguments),a=w.index;return(e=e.indexOf(".")>-1?e.split(".")[0]:e)&&(n=a[e].schema),r(n),n}function k(n,r,i){let c=t(arguments),u=_(i),h=!1,p=function(t,n,r){let a=n&&n.dispatch?n.dispatch:o().dispatch;Object.defineProperty(this,"dispatch",{value:a}),Object.defineProperty(this,"meta",{value:{},writeable:!0,enumerable:!0}),Object.defineProperty(this.meta,"author",{value:"",writeable:!0,enumerable:!0}),Object.defineProperty(this.meta,"name",{value:t,writeable:!0,enumerable:!0}),Object.defineProperty(this.meta,"summary",{value:"",writeable:!0,enumerable:!0}),Object.defineProperty(this.meta,"type",{value:r.type,enumerable:!0}),Object.defineProperty(this.meta,"schema",{value:r}),Object.defineProperty(this.meta.schema,"parent",{value:n||!1}),this.meta.schema.container||Object.defineProperty(this.meta.schema,"container",{value:!!n&&n[r.class]});for(let e=0;e<r.children.length;e++){let t,n,a,o,s=r.children[e].class;s.match(/\[(.*?)]/g)&&(s=/\[(.*?)]/g.exec(s)[1],t=!0),a=t?r[s][0]:r[s],n=a.name||a.class,o=a.value||[],this[s]||Object.defineProperty(this,s,{value:o,enumerable:!0,writable:!0}),t&&this[s].push(new p(n,this,a))}return e("socioscapes.newScapeObject",this),this};return r=f(r),n&&(r?u&&(l(n,"name",r[u.class])?(console.log('Fetching existing scape object "'+n+'" of class "'+u.class+'".'),h=l(n,"name",r[u.class])):(console.log("Adding a new "+u.class+' called "'+n+'" to the "'+r.meta.name+'" '+r.meta.schema.class+"."),h=new p(n,r,u),r[u.class].push(h))):f(n)?(console.log('Fetching exisisting scape "'+n+'".'),h=f(n)):a(n)||(console.log('Creating a new scape called "'+n+'".'),h=new p(n,null,u),s(n,h))),c(h),h}function C(t,r){let a=function(e,t,n,a){let o=!!a.class.match(/\[(.*?)]/g),s=o?/\[(.*?)]/g.exec(a.class)[1]:a.class,i=o?n[s][0]:n[s];i.menu&&Object.defineProperty(e,s,{value:function(n,a,o){let l,f=[],c="function"!=typeof n||a||o?"function"!=typeof a||o?"function"==typeof o?o:function(){}:a:n,u={object:t[s],schema:i,that:t},h=i.menu,p=e;return"menuClass"===i.menu.name?(p=C(t=i.menu(u,n,a),r),c(p)):(n&&(l=r[n]||r.schema.alias[n]||"function"==typeof n&&n,f.push(l),"function"!=typeof a&&f.push(a)),t.dispatch({myArguments:f,myCallback:c,myContext:u,myFunction:h})),p}})},o=function(t){let n=t.meta.schema,r=(n.class,n.parent),s=n.type,i=this;t.meta.thisMenu=i,t.meta.thisObject=t,Object.defineProperty(this,"meta",{value:t.meta}),Object.defineProperty(this,"new",{value:function(e){let t,n=i;return e&&(t=k(e,r,s),n=t?new o(t):i),n}});for(let e=0;e<n.children.length;e++)a(this,t,n,n.children[e]);return e("socioscapes.newScapeMenu",this),this};if(n(t))return new o(t)}var M,P=r(792),x=r.n(P);function O(e){let n=t(arguments),r=!1;return e&&"string"==typeof e&&/^(http|HTTP|https|HTTPS|ftp|FTP|ftps|FTPS):\/\/(([a-zA-Z0-9$\-_.+!*'(),;:&=]|%[0-9a-fA-F]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])){3})|localhost|([a-zA-Z0-9\-\u00C0-\u017F]+\.)+([a-zA-Z]{2,}))(:[0-9]+)?(\/(([a-zA-Z0-9$\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*(\/([a-zA-Z0-9$\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*)*)?(\?([a-zA-Z0-9$\-_.+!*'(),;:@&=\/?]|%[0-9a-fA-F]{2})*)?(#([a-zA-Z0-9$\-_.+!*'(),;:@&=\/?]|%[0-9a-fA-F]{2})*)?)?$/.test(e)&&(r=!0),n(r),r}function T(e){let n=t(arguments),r=new google.maps.Geocoder,a={},o={lat:49.2486050497781,lng:-123.107850477883};try{r.geocode({address:e},(function(t,r){r===google.maps.GeocoderStatus.OK?(a.lat=t[0].geometry.location.lat(),a.lng=t[0].geometry.location.lng(),a.raw=t,n(a)):(console.log("Error: Google Geocoder was unable to locate "+e+", falling back to Vancouver as a default."),n(o))}))}catch{console.log("could not initialize Google Geocoder, falling back to Vancouver as a default."),n(o)}}function I(e,t){let n,r,a,o,s,i=e.prototype;for(o=0;o<t.length;o++)if(a="string"==typeof t[o].path&&t[o].path,n=t[o].extension||!1,a&&n){if(a.indexOf("/")>-1){for(a=a.split("/"),s=0;i[a[s]];s++)i=i[a[s]];r=a[s]}else r=a;i?(i[r]=n,i[r].prototype=e.prototype,t[o].alias&&(i.schema.alias[t[o].alias]=i[r]),t[o].silent||console.log('Extended socioscapes.fn with "'+a+(t[o].alias?'" alias "'+t[o].alias+'".':'".'))):console.log("Sorry, unable to add your extension. Please check the .path string.")}}(M=function r(u){return r.fn=r.prototype={constructor:r,chroma:x(),geostats:h(),extender:I,fetchFromScape:l,fetchGlobal:a,fetchGoogleAuth:c,fetchGoogleBq:p,fetchGoogleGeocode:T,fetchScape:f,fetchScapeSchema:_,fetchWfs:d,isValidName:i,isValidObject:n,isValidUrl:O,menuClass:g,menuConfig:m,menuRequire:b,menuStore:v,newCallback:t,newDispatcher:o,newEvent:e,newGlobal:s,newScapeMenu:C,newScapeObject:k,schema:w,version:"0.8.0-0"},C(f(u||"scape0")||k("scape0",null,"scape"),r.prototype)})&&M.fn&&M.fn.extender&&(M.fn.extender(M,[{path:"viewGmapSymbology",alias:"gsymbology",silent:!0,extension:function e(t){let n,r=e.prototype.chroma,a=e.prototype.isValidObject,o=e.prototype.fetchFromScape,s=e.prototype.newCallback,i=e.prototype.newEvent,l=s(arguments),f=function(e){let t,n,l,f,c=this;if(e&&e.config&&e.config.gmap)return e.config.gmap.styles=e.config.gmap.styles||{},e.config.gmap.styles.default=e.config.gmap.styles.default||{fillOpacity:.75,fillColor:"purple",strokeOpacity:.75,strokeColor:"black",strokeWeight:1,zIndex:5,visible:!0,clickable:!0},e.config.gmap.styles.hover=e.config.gmap.styles.hover||{fillOpacity:.75,fillColor:"purple",strokeOpacity:1,strokeColor:"black",strokeWeight:2,zIndex:10,visible:!0,clickable:!0},e.config.gmap.styles.click=e.config.gmap.styles.click||{fillOpacity:1,fillColor:"purple",strokeOpacity:1,strokeColor:"black",strokeWeight:3,zIndex:15,visible:!0,clickable:!0},e.config.features={selected:{},selectedCount:0,selectedLimit:0},this.dataLayer=new google.maps.Data,Object.defineProperty(this,"init",{value:function(){let t=s(arguments),n=o(e.config.layer,"name",e.meta.schema.parent.layer)||!1,r=!!n&&n.data,a=!!n&&n.geom,l="string"==typeof e.config.featureIdProperty?e.config.featureIdProperty.toLowerCase():"dauid",f="string"==typeof e.config.valueIdProperty?e.config.valueIdProperty.toLowerCase():"total";return r&&a&&l&&f?(c.dataLayer.forEach((function(e){c.dataLayer.remove(e)})),c.dataLayer.addGeoJson(a.geoJson,{featureIdProperty:l}),void 0!==r.geoJson.features[0].properties[f]?(c.dataLayer.forEach((function(e){r.byId[e.getProperty(l)][f]&&e.setProperty(f,r.byId[e.getProperty(l)][f])})),c.classify((function(){c.style((function(){c.onHover(),c.onClick(5),i("socioscapes.updateSymbology",e),t(c)}))}))):console.log("Sorry, that layer does not contain matching data for the geometry.")):console.log('Sorry, there was a problem with your ".config" options. Did you you set a valid layer? Does your layer have data and geometry? Do the property names in your data and geometry correspond to the "featureIdProperty" and "valueIdProperty" fields?'),c}}),Object.defineProperty(this,"classify",{value:function(){let t=s(arguments),n=!!a(e)&&o(e.config.layer,"name",e.meta.schema.parent.layer),r=!!n&&n.data,i="getClass"+e.config.classification.charAt(0).toUpperCase()+e.config.classification.slice(1),l=parseInt(e.config.breaks);if(r){c.off();try{e.config.classes=n.data.geostats[i](l)}catch{}c.on(),t(c)}return c}}),Object.defineProperty(this,"style",{value:function(){let t,n,a,o,i=s(arguments);return c.dataLayer.setStyle((function(s){return t=r.scale(e.config.colourScale).mode("lab").classes(e.config.classes).out("hex"),n=s.getProperty(e.config.valueIdProperty),a=s.getProperty("hover")?"hover":s.getProperty("selected")?"click":"default",o={fillOpacity:e.config.gmap.styles[a].fillOpacity,fillColor:t(n)||e.config.gmap.styles[a].fillColor,strokeOpacity:e.config.gmap.styles[a].strokeOpacity,strokeColor:r(t(n)).darken(1)||e.config.gmap.styles[a].strokeColor,strokeWeight:e.config.gmap.styles[a].strokeWeight,zIndex:e.config.gmap.styles[a].zIndex,visible:e.config.gmap.styles[a].visible,clickable:e.config.gmap.styles[a].clickable},o})),i(c),c}}),Object.defineProperty(this,"on",{value:function(){let t=s(arguments);return c.dataLayer.setMap(e.gmap.mapBase),t(c),c}}),Object.defineProperty(this,"off",{value:function(){let e=s(arguments);return c.dataLayer.setMap(null),e(c),c}}),Object.defineProperty(this,"onHover",{value:function(t){return t=s(arguments),l&&(l.remove(),f.remove()),l=c.dataLayer.addListener("mouseover",(function(n){n.feature.getProperty("selected")||n.feature.setProperty("hover",!0),i("socioscapes.updateFeatureHover",{id:n.feature.getProperty(e.config.featureIdProperty),value:n.feature.getProperty(e.config.valueIdProperty)}),t(n.feature)})),f=c.dataLayer.addListener("mouseout",(function(e){e.feature.setProperty("hover",!1),i("socioscapes.updateFeatureHover",{id:"",value:""}),t(e.feature)})),c}}),Object.defineProperty(this,"onClick",{value:function(r,a){if(a=s(arguments),n){n.remove();for(let t in e.config.features.selected)e.config.features.selected.hasOwnProperty(t)&&(e.config.features.selected[t].setProperty("selected",!1),delete e.config.features.selected[t])}return e.config.features.selectedLimit=Number.isInteger(r)?r:0,e.config.features.selectedCount=0,n=c.dataLayer.addListener("click",(function(n){t=n.feature.getProperty(e.config.featureIdProperty),n.feature.getProperty("selected")?(n.feature.setProperty("selected",!1),e.config.features.selectedCount=e.config.features.selectedLimit?Math.max(e.config.features.selectedCount-1,0):e.config.features.selectedCount,delete e.config.features.selected[t],a(n.feature,!1)):((!e.config.features.selectedLimit||e.config.features.selectedLimit>e.config.features.selectedCount)&&(n.feature.setProperty("selected",!0),e.config.features.selectedCount=e.config.features.selectedLimit>e.config.features.selectedCount?e.config.features.selectedCount+1:e.config.features.selectedCount,e.config.features.selected[t]=n.feature),a(n.feature,!0))})),c}}),this};return n=!!((t=M.fn.isValidObject(t)?t:this||!1)&&t.meta.schema&&t.config)&&o(t.config.layer,"name",t.meta.schema.parent.layer),n?(t.gmap.mapSymbology=new f(t),l(t)):l(!1),t}}]),M.fn.extender(M,[{path:"viewGmapLabels",alias:"glabel",silent:!0,extension:function e(t){let n,r,a=e.prototype.isValidObject,o=e.prototype.newCallback,s=o(arguments);return a(t)?(t.config.gmap.styles=t.config.gmap.styles||{},t.config.gmap.styles.mapLabels=t.config.gmap.styles.mapLabels||[{elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:13}]}],r=new google.maps.OverlayView,r.onAdd=function(){n=this.getPanes(),n.mapPane.style.zIndex=150},r.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null},r.draw=function(){},t.gmap.mapBase?(r.setMap(t.gmap.mapBase),t.gmap.mapLabels=new google.maps.StyledMapType(t.config.gmap.styles.mapLabels),t.gmap.mapBase.overlayMapTypes.insertAt(0,t.gmap.mapLabels),t.gmap.mapLabels.layerHack=r,s(t)):s(!1)):s(!1),t}}]),M.fn.extender(M,[{path:"viewGmapMap",alias:"gmap",silent:!0,extension:function e(t){let n,r=e.prototype.isValidObject,a=e.prototype.fetchGoogleGeocode,o=e.prototype.newCallback,s=o(arguments);return r(t)&&(t.gmap=t.gmap||{},t.config.address=t.config.address||"Toronto, Canada",t.config.gmap=t.config.gmap||{},t.config.gmap.div=t.config.gmap.div||"map-canvas",t.config.gmap.styles=t.config.gmap.styles||{},t.config.gmap.styles.map=t.config.gmap.styles.map||[{featureType:"all",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{visibility:"on"},{saturation:-100}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#dadada"},{saturation:-100}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"},{saturation:-100}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"transit.line",elementType:"geometry.stroke",stylers:[{color:"#dbdbdb"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#dbdbdb"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#d7d7d7"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{color:"#d7d7d7"},{saturation:-100}]},{featureType:"transit.station",elementType:"labels.icon",stylers:[{hue:"#5e5791"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{hue:"#0032ff"},{gamma:"0.45"}]}],n=document.getElementById(t.config.gmap.div),n?a(t.config.address,(function(e){e?(t.config.gmap.geocode=e,t.config.gmap.options=t.config.gmap.options||{zoom:13,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.HYBRID],style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT},disableDefaultUI:!0,addressControlOptions:{position:google.maps.ControlPosition.BOTTOM_CENTER},overviewMapControl:!0,overviewMapControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER,style:google.maps.ZoomControlStyle.LARGE},streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},panControl:!1,panControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},scaleControl:!0,scaleControlOptions:{position:google.maps.ControlPosition.BOTTOM_CENTER}},t.config.gmap.options.styles=t.config.gmap.styles.map,t.gmap.mapBase=new google.maps.Map(n,t.config.gmap.options),google.maps.event.addListenerOnce(t.gmap.mapBase,"idle",(function(){t.gmap.mapBase.setTilt(45),s(t)}))):s(!1)})):(console.log("Sorry, unable to located the view's config.gmap.div element."),s(!1))),t}}]),M.fn.extender(M,[{path:"viewGmapView",alias:"gview",silent:!0,extension:function e(t,n){let r=e.prototype.isValidObject,a=e.prototype.newCallback,o=a(arguments),s=e.prototype.viewGmapMap,i=e.prototype.viewGmapLabels,l=e.prototype.viewGmapSymbology,f=t;return r(f)?f.gmap?f.gmap.mapLabels?l(f,(function(e){e?f.gmap.mapSymbology.init((function(e){e?(f.gmap.mapSymbology.on(),o(f)):o(!1)})):o(!1)})):i(f,(function(e){e?l(f,(function(e){e?f.gmap.mapSymbology.init((function(e){e?(f.gmap.mapSymbology.on(),o(f)):o(!1)})):o(!1)})):o(!1)})):s(f,(function(e){e?i(f,(function(e){e?l(f,(function(e){e?f.gmap.mapSymbology.init((function(e){e?(f.gmap.mapSymbology.on(),o(f)):o(!1)})):o(!1)})):o(!1)})):o(!1)})):o(!1),f}}]))})()})();